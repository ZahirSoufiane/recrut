(function(e){'function'===typeof define&&define.amd?define(['jquery','moment'],e):'object'===('undefined'===typeof exports?'undefined':babelHelpers.typeof(exports))?module.exports=e(require('jquery'),require('moment')):e(jQuery,moment)})(function(e,r){function t(e){return W(e,Xe)}function n(e,t){t.left&&e.css({"border-left-width":1,"margin-left":t.left-1}),t.right&&e.css({"border-right-width":1,"margin-right":t.right-1})}function i(e){e.css({"margin-left":'',"margin-right":'',"border-left-width":'',"border-right-width":''})}function o(){e('body').addClass('fc-not-allowed')}function a(){e('body').removeClass('fc-not-allowed')}function l(t,n,r){var o=Ue(n/t.length),a=Ue(n-o*(t.length-1)),l=[],d=[],c=[],u=0;s(t),t.each(function(n,r){var i=n===t.length-1?a:o,s=e(r).outerHeight(!0);s<i?(l.push(r),d.push(s),c.push(e(r).height())):u+=s}),r&&(n-=u,o=Ue(n/l.length),a=Ue(n-o*(l.length-1))),e(l).each(function(t,n){var r=t===l.length-1?a:o,i=d[t],s=c[t];i<r&&e(n).height(r-(i-s))})}function s(e){e.height('')}function d(t){var n=0;return t.find('> *').each(function(t,r){var i=e(r).outerWidth();i>n&&(n=i)}),n++,t.width(n),n}function c(e,t){var n=e.add(t),r;return n.css({position:'relative',left:-1}),r=e.outerHeight()-t.outerHeight(),n.css({position:'',left:''}),r}function u(t){var n=t.css('position'),r=t.parents().filter(function(){var t=e(this);return /(auto|scroll)/.test(t.css('overflow')+t.css('overflow-y')+t.css('overflow-x'))}).eq(0);return'fixed'!==n&&r.length?r:e(t[0].ownerDocument||document)}function g(e,t){var n=e.offset(),r=n.left-(t?t.left:0),i=n.top-(t?t.top:0);return{left:r,right:r+e.outerWidth(),top:i,bottom:i+e.outerHeight()}}function p(e,t){var n=e.offset(),r=m(e),i=n.left+v(e,'border-left-width')+r.left-(t?t.left:0),o=n.top+v(e,'border-top-width')+r.top-(t?t.top:0);return{left:i,right:i+e[0].clientWidth,top:o,bottom:o+e[0].clientHeight}}function m(e){var t=e.innerWidth()-e[0].clientWidth,n={left:0,right:0,top:0,bottom:e.innerHeight()-e[0].clientHeight};return f()&&'rtl'==e.css('direction')?n.left=t:n.right=t,n}function f(){return null===Ke&&(Ke=h()),Ke}function h(){var t=e('<div><div/></div>').css({position:'absolute',top:-1e3,left:0,border:0,padding:0,overflow:'scroll',direction:'rtl'}).appendTo('body'),n=t.children(),r=n.offset().left>t.offset().left;return t.remove(),r}function v(e,t){return parseFloat(e.css(t))||0}function y(e){return 1==e.which&&!e.ctrlKey}function S(e){if(void 0!==e.pageX)return e.pageX;var t=e.originalEvent.touches;if(t)return t[0].pageX}function w(e){if(void 0!==e.pageY)return e.pageY;var t=e.originalEvent.touches;if(t)return t[0].pageY}function E(e){return /^touch/.test(e.type)}function b(e){e.addClass('fc-unselectable').on('selectstart',D)}function D(e){e.preventDefault()}function C(e){return!!window.addEventListener&&(window.addEventListener('scroll',e,!0),!0)}function H(e){return!!window.removeEventListener&&(window.removeEventListener('scroll',e,!0),!0)}function T(e,t){var n={left:je(e.left,t.left),right:We(e.right,t.right),top:je(e.top,t.top),bottom:We(e.bottom,t.bottom)};return n.left<n.right&&n.top<n.bottom&&n}function I(e,t){return{left:We(je(e.left,t.left),t.right),top:We(je(e.top,t.top),t.bottom)}}function x(e){return{left:(e.left+e.right)/2,top:(e.top+e.bottom)/2}}function R(e,t){return{left:e.left-t.left,top:e.top-t.top}}function k(t){var n=[],r=[],o,i;for('string'===typeof t?r=t.split(/\s*,\s*/):'function'===typeof t?r=[t]:e.isArray(t)&&(r=t),o=0;o<r.length;o++)i=r[o],'string'===typeof i?n.push('-'==i.charAt(0)?{field:i.substring(1),order:-1}:{field:i,order:1}):'function'===typeof i&&n.push({func:i});return n}function L(e,t,n){var r,i;for(r=0;r<n.length;r++)if(i=z(e,t,n[r]),i)return i;return 0}function z(e,t,n){return n.func?n.func(e,t):B(e[n.field],t[n.field])*(n.order||1)}function B(t,n){return t||n?null==n?-1:null==t?1:'string'===e.type(t)||'string'===e.type(n)?(t+'').localeCompare(n+''):t-n:0}function F(e,t){var n=e.start,r=e.end,i=t.start,o=t.end,a,l,s,d;if(r>i&&n<o)return n>=i?(a=n.clone(),s=!0):(a=i.clone(),s=!1),r<=o?(l=r.clone(),d=!0):(l=o.clone(),d=!1),{start:a,end:l,isStart:s,isEnd:d}}function N(e,t){return r.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),'days'),ms:e.time()-t.time()})}function G(e,t){return r.duration({days:e.clone().stripTime().diff(t.clone().stripTime(),'days')})}function M(e,t,n){return r.duration(Ye(e.diff(t,n,!0)),n)}function O(e,t){var n,r,i;for(n=0;n<$e.length&&(r=$e[n],i=A(r,e,t),!(1<=i&&re(i)));n++);return r}function A(e,t,n){return null==n?r.isDuration(t)?t.as(e):t.end.diff(t.start,e,!0):n.diff(t,e,!0)}function V(e,t){var n,r;return P(e)||P(t)?e/t:(n=e.asMonths(),r=t.asMonths(),1<=_e(n)&&re(n)&&1<=_e(r)&&re(r)?n/r:e.asDays()/t.asDays())}function P(e){return!!(e.hours()||e.minutes()||e.seconds()||e.milliseconds())}function _(e){return'[object Date]'===Object.prototype.toString.call(e)||e instanceof Date}function Y(e){return /^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(e)}function W(e,t){var n={},r,i,o,a,l,s;if(t)for(r=0;r<t.length;r++){for(i=t[r],o=[],a=e.length-1;0<=a;a--)if(l=e[a][i],'object'===('undefined'===typeof l?'undefined':babelHelpers.typeof(l)))o.unshift(l);else if(void 0!==l){n[i]=l;break}o.length&&(n[i]=W(o))}for(r=e.length-1;0<=r;r--)for(i in s=e[r],s)i in n||(n[i]=s[i]);return n}function j(e){var t=function(){};return t.prototype=e,new t}function U(e,t){for(var n in e)q(e,n)&&(t[n]=e[n])}function q(e,t){return Je.call(e,t)}function Z(t){return /undefined|null|boolean|number|string/.test(e.type(t))}function X(t,n,r){if(e.isFunction(t)&&(t=[t]),t){var o,i;for(o=0;o<t.length;o++)i=t[o].apply(n,r)||i;return i}}function K(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}function Q(e){return(e+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/'/g,'&#039;').replace(/"/g,'&quot;').replace(/\n/g,'<br />')}function $(e){return e.replace(/&.*?;/g,'')}function J(t){var n=[];return e.each(t,function(e,t){null!=t&&n.push(e+':'+t)}),n.join(';')}function ee(t){var n=[];return e.each(t,function(e,t){null!=t&&n.push(e+'="'+Q(t)+'"')}),n.join(' ')}function te(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ne(e,t){return e-t}function re(e){return 0===e%1}function ie(e,t){var n=e[t];return function(){return n.apply(e,arguments)}}function oe(e,t,n){var r=function r(){var d=+new Date-l;d<t?i=setTimeout(r,t-d):(i=null,!n&&(s=e.apply(a,o),a=o=null))},i,o,a,l,s;return function(){a=this,o=arguments,l=+new Date;var d=n&&!i;return i||(i=setTimeout(r,t)),d&&(s=e.apply(a,o),a=o=null),s}}function ae(t,n){return t&&t.then&&'resolved'!==t.state()?n?t.then(n):void 0:e.when(n())}function le(t,n,i){var o=t[0],a=1==t.length&&'string'===typeof o,l,s,d,c;return r.isMoment(o)||_(o)||void 0===o?c=r.apply(null,t):(l=!1,s=!1,a?et.test(o)?(o+='-01',t=[o],l=!0,s=!0):(d=tt.exec(o))&&(l=!d[5],s=!0):e.isArray(o)&&(s=!0),c=n||l?r.utc.apply(r,t):r.apply(null,t),l?(c._ambigTime=!0,c._ambigZone=!0):i&&(s?c._ambigZone=!0:a&&c.utcOffset(o))),c._fullCalendar=!0,c}function se(e,t){return rt.format.call(e,t)}function de(e,t){return ce(e,fe(t))}function ce(e,t){var n='',r;for(r=0;r<t.length;r++)n+=ue(e,t[r]);return n}function ue(e,t){var n,r;return'string'===typeof t?t:(n=t.token)?ot[n]?ot[n](e):se(e,n):t.maybe&&(r=ce(e,t.maybe),r.match(/[1-9]/))?r:''}function ge(e,t,n,r,i){var o;return e=qe.moment.parseZone(e),t=qe.moment.parseZone(t),o=e.localeData(),n=o.longDateFormat(n)||n,r=r||' - ',pe(e,t,fe(n),r,i)}function pe(e,t,n,r,i){var o=e.clone().stripZone(),a=t.clone().stripZone(),l='',s='',d='',c='',u='',g,p,m,f;for(p=0;p<n.length&&(g=me(e,t,o,a,n[p]),!1!==g);p++)l+=g;for(m=n.length-1;m>p&&(g=me(e,t,o,a,n[m]),!1!==g);m--)s=g+s;for(f=p;f<=m;f++)d+=ue(e,n[f]),c+=ue(t,n[f]);return(d||c)&&(i?u=c+r+d:u=d+r+c),l+u+s}function me(e,t,n,r,i){var o,a;return'string'===typeof i?i:(o=i.token)&&(a=at[o.charAt(0)],a&&n.isSame(r,a))&&se(e,o)}function fe(e){return e in lt?lt[e]:lt[e]=he(e)}function he(e){for(var t=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g,r;r=n.exec(e);)r[1]?t.push(r[1]):r[2]?t.push({maybe:he(r[2])}):r[3]?t.push({token:r[3]}):r[5]&&t.push(r[5]);return t}function ve(){}function ye(e,t){var n;return q(t,'constructor')&&(n=t.constructor),'function'!==typeof n&&(n=t.constructor=function(){e.apply(this,arguments)}),n.prototype=j(e.prototype),U(t,n.prototype),U(e,n),n}function Se(e,t){U(t,e.prototype)}function we(e,t){return e||t?e&&t&&e.component===t.component&&Ee(e,t)&&Ee(t,e):!0}function Ee(e,t){for(var n in e)if(!/^(component|left|right|top|bottom)$/.test(n)&&e[n]!==t[n])return!1;return!0}function be(e){return{start:e.start.clone(),end:e.end?e.end.clone():null,allDay:e.allDay}}function De(e){var t=He(e);return'background'===t||'inverse-background'===t}function Ce(e){return'inverse-background'===He(e)}function He(e){return K((e.source||{}).rendering,e.rendering)}function Te(e){var t={},n,r;for(n=0;n<e.length;n++)r=e[n],(t[r._id]||(t[r._id]=[])).push(r);return t}function Ie(e,t){return e.start-t.start}function xe(t){var n=qe.dataAttrPrefix,i,o,a,l;return n&&(n+='-'),i=t.data(n+'event')||null,i&&(i='object'===('undefined'===typeof i?'undefined':babelHelpers.typeof(i))?e.extend({},i):{},o=i.start,null==o&&(o=i.time),a=i.duration,l=i.stick,delete i.start,delete i.time,delete i.duration,delete i.stick),null==o&&(o=t.data(n+'start')),null==o&&(o=t.data(n+'time')),null==a&&(a=t.data(n+'duration')),null==l&&(l=t.data(n+'stick')),o=null==o?null:r.duration(o),a=null==a?null:r.duration(a),l=!!l,{eventProps:i,startTime:o,duration:a,stick:l}}function Re(e,t){var n,r;for(n=0;n<t.length;n++)if(r=t[n],r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0;return!1}function ke(e,t){return e.leftCol-t.leftCol}function Le(e){var t=[],n,r,i;for(n=0;n<e.length;n++){for(r=e[n],i=0;i<t.length&&!!Fe(r,t[i]).length;i++);r.level=i,(t[i]||(t[i]=[])).push(r)}return t}function ze(e){var t,n,r,i,o;for(t=0;t<e.length;t++)for(n=e[t],r=0;r<n.length;r++)for(i=n[r],i.forwardSegs=[],o=t+1;o<e.length;o++)Fe(i,e[o],i.forwardSegs)}function Be(e){var t=e.forwardSegs,n=0,r,i;if(void 0===e.forwardPressure){for(r=0;r<t.length;r++)i=t[r],Be(i),n=je(n,1+i.forwardPressure);e.forwardPressure=n}}function Fe(e,t,n){n=n||[];for(var r=0;r<t.length;r++)Ne(e,t[r])&&n.push(t[r]);return n}function Ne(e,t){return e.bottom>t.top&&e.top<t.bottom}function Ge(t){e.each(It,function(e,n){null==t[e]&&(t[e]=n(t))})}function Me(e){return r.localeData(e)||r.localeData('en')}function Oe(n){function r(){a&&(a.remove(),a=o.el=null)}function i(r){var i=e('<div class="fc-'+r+'"/>'),o=n.options,a=o.header[r];return a&&e.each(a.split(' '),function(){var r=e(),a=!0,s;e.each(this.split(','),function(i,s){var d,c,u,g,p,m,f,h,v,y;'title'==s?(r=r.add(e('<h2>&nbsp;</h2>')),a=!1):((d=(o.customButtons||{})[s])?(u=function(e){d.click&&d.click.call(y[0],e)},g='',p=d.text):(c=n.getViewSpec(s))?(u=function(){n.changeView(s)},t.push(s),g=c.buttonTextOverride,p=c.buttonTextDefault):n[s]&&(u=function(){n[s]()},g=(n.overrides.buttonText||{})[s],p=o.buttonText[s]),u&&(m=d?d.themeIcon:o.themeButtonIcons[s],f=d?d.icon:o.buttonIcons[s],h=g?Q(g):m&&o.theme?'<span class=\'ui-icon ui-icon-'+m+'\'></span>':f&&!o.theme?'<span class=\'fc-icon fc-icon-'+f+'\'></span>':Q(p),v=['fc-'+s+'-button',l+'-button',l+'-state-default'],y=e('<button type="button" class="'+v.join(' ')+'">'+h+'</button>').click(function(e){y.hasClass(l+'-state-disabled')||(u(e),(y.hasClass(l+'-state-active')||y.hasClass(l+'-state-disabled'))&&y.removeClass(l+'-state-hover'))}).mousedown(function(){y.not('.'+l+'-state-active').not('.'+l+'-state-disabled').addClass(l+'-state-down')}).mouseup(function(){y.removeClass(l+'-state-down')}).hover(function(){y.not('.'+l+'-state-active').not('.'+l+'-state-disabled').addClass(l+'-state-hover')},function(){y.removeClass(l+'-state-hover').removeClass(l+'-state-down')}),r=r.add(y)))}),a&&r.first().addClass(l+'-corner-left').end().last().addClass(l+'-corner-right').end(),1<r.length?(s=e('<div/>'),a&&s.addClass('fc-button-group'),s.append(r),i.append(s)):i.append(r)}),i}var o=this;o.render=function(){var t=n.options,o=t.header;l=t.theme?'ui':'fc',o?(a?a.empty():a=this.el=e('<div class=\'fc-toolbar\'/>'),a.append(i('left')).append(i('right')).append(i('center')).append('<div class="fc-clear"/>')):r()},o.removeElement=r,o.updateTitle=function(e){a&&a.find('h2').text(e)},o.activateButton=function(e){a&&a.find('.fc-'+e+'-button').addClass(l+'-state-active')},o.deactivateButton=function(e){a&&a.find('.fc-'+e+'-button').removeClass(l+'-state-active')},o.disableButton=function(e){a&&a.find('.fc-'+e+'-button').prop('disabled',!0).addClass(l+'-state-disabled')},o.enableButton=function(e){a&&a.find('.fc-'+e+'-button').prop('disabled',!1).removeClass(l+'-state-disabled')},o.getViewsWithButtons=function(){return t},o.el=null;var t=[],a,l}function Ae(){function n(e,t){var n,r;for('reset'===t?L=[]:'add'!==t&&(L=f(L,e)),n=0;n<e.length;n++)r=e[n],'pending'!==r._status&&k++,r._fetchId=(r._fetchId||0)+1,r._status='pending';for(n=0;n<e.length;n++)r=e[n],o(r,r._fetchId)}function o(t,n){s(t,function(r){var o=e.isArray(t.events),a,i,s;if(n===t._fetchId&&'rejected'!==t._status){if(t._status='resolved',r)for(a=0;a<r.length;a++)i=r[a],s=o?i:w(i,t),s&&L.push.apply(L,C(s));l()}})}function a(e){var t='pending'===e._status;e._status='rejected',t&&l()}function l(){k--,k||t(L)}function s(t,n){var r=qe.sourceFetchers,o,i;for(o=0;o<r.length;o++){if(i=r[o].call(I,t,z.clone(),B.clone(),I.options.timezone,n),!0===i)return;if('object'==('undefined'===typeof i?'undefined':babelHelpers.typeof(i)))return void s(i,n)}var a=t.events;if(a)e.isFunction(a)?(I.pushLoading(),a.call(I,z.clone(),B.clone(),I.options.timezone,function(e){n(e),I.popLoading()})):e.isArray(a)?n(a):n();else{var l=t.url;if(l){var d=t.success,c=t.error,u=t.complete,g;g=e.isFunction(t.data)?t.data():t.data;var p=e.extend({},g||{}),m=K(t.startParam,I.options.startParam),f=K(t.endParam,I.options.endParam),h=K(t.timezoneParam,I.options.timezoneParam);m&&(p[m]=z.format()),f&&(p[f]=B.format()),I.options.timezone&&'local'!=I.options.timezone&&(p[h]=I.options.timezone),I.pushLoading(),e.ajax(e.extend({},xt,t,{data:p,success:function(t){t=t||[];var r=X(d,this,arguments);e.isArray(r)&&(t=r),n(t)},error:function(){X(c,this,arguments),n()},complete:function(){X(u,this,arguments),I.popLoading()}}))}else n()}}function d(t){var n=qe.sourceNormalizers,r,o;if(e.isFunction(t)||e.isArray(t)?r={events:t}:'string'===typeof t?r={url:t}:'object'===('undefined'===typeof t?'undefined':babelHelpers.typeof(t))&&(r=e.extend({},t)),r){for(r.className?'string'===typeof r.className&&(r.className=r.className.split(/\s+/)):r.className=[],e.isArray(r.events)&&(r.origArray=r.events,r.events=e.map(r.events,function(e){return w(e,r)})),o=0;o<n.length;o++)n[o].call(I,r);return r}}function i(n,r){var o;for(o=0;o<n.length;o++)a(n[o]);r?(R=[],L=[]):(R=e.grep(R,function(e){for(o=0;o<n.length;o++)if(e===n[o])return!1;return!0}),L=f(L,n)),t(L)}function c(t){return e.grep(R,function(e){return e.id&&e.id===t})[0]}function u(t){t?!e.isArray(t)&&(t=[t]):t=[];var n=[],r;for(r=0;r<t.length;r++)n.push.apply(n,g(t[r]));return n}function g(t){var n,r;for(n=0;n<R.length;n++)if(r=R[n],r===t)return[r];return r=c(t),r?[r]:e.grep(R,function(e){return p(t,e)})}function p(e,t){return e&&t&&m(e)==m(t)}function m(e){return('object'===('undefined'===typeof e?'undefined':babelHelpers.typeof(e))?e.origArray||e.googleCalendarId||e.url||e.events:null)||e}function f(t,n){return e.grep(t,function(e){for(var t=0;t<n.length;t++)if(e.source===n[t])return!1;return!0})}function h(t){var n={};return e.each(t,function(e,t){v(e)&&void 0!==t&&Z(t)&&(n[e]=t)}),n}function v(e){return!/^_|^(id|allDay|start|end)$/.test(e)}function y(t){return e.isFunction(t)?e.grep(L,t):null==t?L:(t+='',e.grep(L,function(n){return n._id==t}))}function S(e){e.start=I.moment(e.start),e.end&&(e.end=I.moment(e.end)),Ve(e)}function w(t,n){var i={},o,a,l;if(I.options.eventDataTransform&&(t=I.options.eventDataTransform(t)),n&&n.eventDataTransform&&(t=n.eventDataTransform(t)),e.extend(i,t),n&&(i.source=n),i._id=t._id||(void 0===t.id?'_fc'+Rt++:t.id+''),i.className=t.className?'string'==typeof t.className?t.className.split(/\s+/):t.className:[],o=t.start||t.date,a=t.end,Y(o)&&(o=r.duration(o)),Y(a)&&(a=r.duration(a)),t.dow||r.isDuration(o)||r.isDuration(a))i.start=o?r.duration(o):null,i.end=a?r.duration(a):null,i._recurring=!0;else{if(o&&(o=I.moment(o),!o.isValid()))return!1;a&&(a=I.moment(a),!a.isValid()&&(a=null)),l=t.allDay,void 0===l&&(l=K(n?n.allDayDefault:void 0,I.options.allDayDefault)),E(o,a,l,i)}return I.normalizeEvent(i),i}function E(e,t,n,r){r.start=e,r.end=t,r.allDay=n,b(r),Ve(r)}function b(e){D(e),e.end&&!e.end.isAfter(e.start)&&(e.end=null),e.end||(I.options.forceEventDuration?e.end=I.getDefaultEventEnd(e.allDay,e.start):e.end=null)}function D(e){null==e.allDay&&(e.allDay=!(e.start.hasTime()||e.end&&e.end.hasTime())),e.allDay?(e.start.stripTime(),e.end&&e.end.stripTime()):(!e.start.hasTime()&&(e.start=I.applyTimezone(e.start.time(0))),e.end&&!e.end.hasTime()&&(e.end=I.applyTimezone(e.end.time(0))))}function C(t,n,r){var o=[],a,l,s,i,d,c,u,g,p;if(n=n||z,r=r||B,t)if(t._recurring){if(l=t.dow)for(a={},s=0;s<l.length;s++)a[l[s]]=!0;for(i=n.clone().stripTime();i.isBefore(r);)(!a||a[i.day()])&&(d=t.start,c=t.end,u=i.clone(),g=null,d&&(u=u.time(d)),c&&(g=i.clone().time(c)),p=e.extend({},t),E(u,g,!d&&!c,p),o.push(p)),i.add(1,'days')}else o.push(t);return o}function H(t,n,r){function i(e,t){return r?M(e,t,r):n.allDay?G(e,t):N(e,t)}var o={},a,l,s,d,c,u;return n=n||{},n.start||(n.start=t.start.clone()),void 0===n.end&&(n.end=t.end?t.end.clone():null),null==n.allDay&&(n.allDay=t.allDay),b(n),a={start:t._start.clone(),end:t._end?t._end.clone():I.getDefaultEventEnd(t._allDay,t._start),allDay:n.allDay},b(a),l=null!==t._end&&null===n.end,s=i(n.start,a.start),n.end?(d=i(n.end,a.end),c=d.subtract(s)):c=null,e.each(n,function(e,t){v(e)&&void 0!==t&&(o[e]=t)}),u=T(y(t._id),l,n.allDay,s,c,o),{dateDelta:s,durationDelta:c,undo:u}}function T(t,n,r,o,a,l){var s=I.getIsAmbigTimezone(),d=[];return o&&!o.valueOf()&&(o=null),a&&!a.valueOf()&&(a=null),e.each(t,function(t,i){var c,u;c={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay},e.each(l,function(e){c[e]=i[e]}),u={start:i._start,end:i._end,allDay:r},b(u),n?u.end=null:a&&!u.end&&(u.end=I.getDefaultEventEnd(u.allDay,u.start)),o&&(u.start.add(o),u.end&&u.end.add(o)),a&&u.end.add(a),s&&!u.allDay&&(o||a)&&(u.start.stripZone(),u.end&&u.end.stripZone()),e.extend(i,l,u),Ve(i),d.push(function(){e.extend(i,c),Ve(i)})}),function(){for(var e=0;e<d.length;e++)d[e]()}}var I=this;I.isFetchNeeded=function(e,t){return!z||e<z||t>B},I.fetchEvents=function(e,t){z=e,B=t,n(R,'reset')},I.fetchEventSources=n,I.getEventSources=function(){return R.slice(1)},I.getEventSourceById=c,I.getEventSourcesByMatchArray=u,I.getEventSourcesByMatch=g,I.addEventSource=function(e){var t=d(e);t&&(R.push(t),n([t],'add'))},I.removeEventSource=function(e){i(g(e))},I.removeEventSources=function(e){null==e?i(R,!0):i(u(e))},I.updateEvent=function(e){e.start=I.moment(e.start),e.end=e.end?I.moment(e.end):null,H(e,h(e)),t(L)},I.renderEvent=function(e,n){var r=w(e),o,a,i;if(r){for(o=C(r),a=0;a<o.length;a++)i=o[a],i.source||(n&&(x.events.push(i),i.source=x),L.push(i));return t(L),o}return[]},I.removeEvents=function(n){var r,o;for(null==n?n=function(){return!0}:!e.isFunction(n)&&(r=n+'',n=function(e){return e._id==r}),L=e.grep(L,n,!0),o=0;o<R.length;o++)e.isArray(R[o].events)&&(R[o].events=e.grep(R[o].events,n,!0));t(L)},I.clientEvents=y,I.mutateEvent=H,I.normalizeEventDates=b,I.normalizeEventTimes=D;var t=I.reportEvents,x={events:[]},R=[x],k=0,L=[],z,B;e.each((I.options.events?[I.options.events]:[]).concat(I.options.eventSources||[]),function(e,t){var n=d(t);n&&R.push(n)}),I.rezoneArrayEventSources=function(){var t,n,r;for(t=0;t<R.length;t++)if(n=R[t].events,e.isArray(n))for(r=0;r<n.length;r++)S(n[r])},I.buildEventFromInput=w,I.expandEvent=C,I.getEventCache=function(){return L}}function Ve(e){e._allDay=e.allDay,e._start=e.start.clone(),e._end=e.end?e.end.clone():null}var Pe=Math.ceil,_e=Math.abs,Ye=Math.round,We=Math.min,je=Math.max,Ue=Math.floor,qe=e.fullCalendar={version:'3.0.1',internalApiVersion:6},Ze=qe.views={};e.fn.fullCalendar=function(t){var n=Array.prototype.slice.call(arguments,1),r=this;return this.each(function(o,a){var l=e(a),s=l.data('fullCalendar'),d;'string'===typeof t?s&&e.isFunction(s[t])&&(d=s[t].apply(s,n),!o&&(r=d),'destroy'===t&&l.removeData('fullCalendar')):!s&&(s=new Dt(l,t),l.data('fullCalendar',s),s.render())}),r};var Xe=['header','buttonText','buttonIcons','themeButtonIcons'];qe.intersectRanges=F,qe.applyAll=X,qe.debounce=oe,qe.isInt=re,qe.htmlEscape=Q,qe.cssToStr=J,qe.proxy=ie,qe.capitaliseFirstLetter=te,qe.getOuterRect=g,qe.getClientRect=p,qe.getContentRect=function(e,t){var n=e.offset(),r=n.left+v(e,'border-left-width')+v(e,'padding-left')-(t?t.left:0),i=n.top+v(e,'border-top-width')+v(e,'padding-top')-(t?t.top:0);return{left:r,right:r+e.width(),top:i,bottom:i+e.height()}},qe.getScrollbarWidths=m;var Ke=null;qe.preventDefault=D,qe.intersectRects=T,qe.parseFieldSpecs=k,qe.compareByFieldSpecs=L,qe.compareByFieldSpec=z,qe.flexibleCompare=B,qe.computeIntervalUnit=O,qe.divideRangeByDuration=function(e,t,n){var r;return P(n)?(t-e)/n:(r=n.asMonths(),1<=_e(r)&&re(r)?t.diff(e,'months',!0)/r:t.diff(e,'days',!0)/n.asDays())},qe.divideDurationByDuration=V,qe.multiplyDuration=function(e,t){var n;return P(e)?r.duration(e*t):(n=e.asMonths(),1<=_e(n)&&re(n)?r.duration({months:n*t}):r.duration({days:e.asDays()*t}))},qe.durationHasTime=P;var Qe=['sun','mon','tue','wed','thu','fri','sat'],$e=['year','month','week','day','hour','minute','second','millisecond'];qe.log=function(){var e=window.console;if(e&&e.log)return e.log.apply(e,arguments)},qe.warn=function(){var e=window.console;return e&&e.warn?e.warn.apply(e,arguments):qe.log.apply(qe,arguments)};var Je={}.hasOwnProperty,et=/^\s*\d{4}-\d\d$/,tt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,nt=r.fn,rt=e.extend({},nt),it=r.momentProperties;it.push('_fullCalendar'),it.push('_ambigTime'),it.push('_ambigZone'),qe.moment=function(){return le(arguments)},qe.moment.utc=function(){var e=le(arguments,!0);return e.hasTime()&&e.utc(),e},qe.moment.parseZone=function(){return le(arguments,!0,!0)},nt.week=nt.weeks=function(e){var t=this._locale._fullCalendar_weekCalc;return null==e&&'function'===typeof t?t(this):'ISO'===t?rt.isoWeek.apply(this,arguments):rt.week.apply(this,arguments)},nt.time=function(e){if(!this._fullCalendar)return rt.time.apply(this,arguments);if(null==e)return r.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,r.isDuration(e)||r.isMoment(e)||(e=r.duration(e));var t=0;return r.isDuration(e)&&(t=24*Ue(e.asDays())),this.hours(t+e.hours()).minutes(e.minutes()).seconds(e.seconds()).milliseconds(e.milliseconds())},nt.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this},nt.hasTime=function(){return!this._ambigTime},nt.stripZone=function(){var e;return this._ambigZone||(e=this._ambigTime,this.utc(!0),this._ambigTime=e||!1,this._ambigZone=!0),this},nt.hasZone=function(){return!this._ambigZone},nt.local=function(e){return rt.local.call(this,this._ambigZone||e),this._ambigTime=!1,this._ambigZone=!1,this},nt.utc=function(e){return rt.utc.call(this,e),this._ambigTime=!1,this._ambigZone=!1,this},nt.utcOffset=function(e){return null!=e&&(this._ambigTime=!1,this._ambigZone=!1),rt.utcOffset.apply(this,arguments)},nt.format=function(){return this._fullCalendar&&arguments[0]?de(this,arguments[0]):this._ambigTime?se(this,'YYYY-MM-DD'):this._ambigZone?se(this,'YYYY-MM-DD[T]HH:mm:ss'):rt.format.apply(this,arguments)},nt.toISOString=function(){return this._ambigTime?se(this,'YYYY-MM-DD'):this._ambigZone?se(this,'YYYY-MM-DD[T]HH:mm:ss'):rt.toISOString.apply(this,arguments)};var ot={t:function(e){return se(e,'a').charAt(0)},T:function(e){return se(e,'A').charAt(0)}};qe.formatRange=ge;var at={Y:'year',M:'month',D:'day',d:'day',A:'second',a:'second',T:'second',t:'second',H:'second',h:'second',m:'second',s:'second'},lt={},st={Y:{value:1,unit:'year'},M:{value:2,unit:'month'},W:{value:3,unit:'week'},w:{value:3,unit:'week'},D:{value:4,unit:'day'},d:{value:4,unit:'day'}};qe.queryMostGranularFormatUnit=function(e){var t=fe(e),n,r,i,o;for(n=0;n<t.length;n++)r=t[n],r.token&&(i=st[r.token.charAt(0)],i&&(!o||i.value>o.value)&&(o=i));return o?o.unit:null},qe.Class=ve,ve.extend=function(){var e=arguments.length,t,n;for(t=0;t<e;t++)n=arguments[t],t<e-1&&Se(this,n);return ye(this,n||{})},ve.mixin=function(e){Se(this,e)};var dt=qe.EmitterMixin={on:function(t,n){var r=function(e,t){return n.apply(t.context||this,t.args||[])};return n.guid||(n.guid=e.guid++),r.guid=n.guid,e(this).on(t,r),this},off:function(t,n){return e(this).off(t,n),this},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e(this).triggerHandler(t,{args:n}),this},triggerWith:function(t,n,r){return e(this).triggerHandler(t,{context:n,args:r}),this}},ct=qe.ListenerMixin=function(){var t=0;return{listenerId:null,listenTo:function(t,n,r){if('object'===('undefined'===typeof n?'undefined':babelHelpers.typeof(n)))for(var i in n)n.hasOwnProperty(i)&&this.listenTo(t,i,n[i]);else'string'===typeof n&&t.on(n+'.'+this.getListenerNamespace(),e.proxy(r,this))},stopListeningTo:function(e,t){e.off((t||'')+'.'+this.getListenerNamespace())},getListenerNamespace:function(){return null==this.listenerId&&(this.listenerId=t++),'_listener'+this.listenerId}}}(),ut={isIgnoringMouse:!1,delayUnignoreMouse:null,initMouseIgnoring:function(e){this.delayUnignoreMouse=oe(ie(this,'unignoreMouse'),e||1e3)},tempIgnoreMouse:function(){this.isIgnoringMouse=!0,this.delayUnignoreMouse()},unignoreMouse:function(){this.isIgnoringMouse=!1}},gt=ve.extend(ct,{isHidden:!0,options:null,el:null,margin:10,constructor:function(e){this.options=e||{}},show:function(){this.isHidden&&(!this.el&&this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger('show'))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger('hide'))},render:function(){var t=this,n=this.options;this.el=e('<div class="fc-popover"/>').addClass(n.className||'').css({top:0,left:0}).append(n.content).appendTo(n.parentEl),this.el.on('click','.fc-close',function(){t.hide()}),n.autoHide&&this.listenTo(e(document),'mousedown',this.documentMousedown)},documentMousedown:function(t){this.el&&!e(t.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),this.stopListeningTo(e(document),'mousedown')},position:function(){var t=this.options,n=this.el.offsetParent().offset(),r=this.el.outerWidth(),i=this.el.outerHeight(),o=e(window),a=u(this.el),l,s,d,c,g;c=t.top||0,g=void 0===t.left?void 0===t.right?0:t.right-r:t.left,a.is(window)||a.is(document)?(a=o,l=0,s=0):(d=a.offset(),l=d.top,s=d.left),l+=o.scrollTop(),s+=o.scrollLeft(),!1!==t.viewportConstrain&&(c=We(c,l+a.outerHeight()-i-this.margin),c=je(c,l+this.margin),g=We(g,s+a.outerWidth()-r-this.margin),g=je(g,s+this.margin)),this.el.css({top:c-n.top,left:g-n.left})},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1))}}),pt=qe.CoordCache=ve.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(t){this.els=e(t.els),this.isHorizontal=t.isHorizontal,this.isVertical=t.isVertical,this.forcedOffsetParentEl=t.offsetParent?e(t.offsetParent):null},build:function(){var e=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=e.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},ensureBuilt:function(){this.origin||this.build()},buildElHorizontals:function(){var t=[],n=[];this.els.each(function(r,i){var o=e(i),a=o.offset().left,l=o.outerWidth();t.push(a),n.push(a+l)}),this.lefts=t,this.rights=n},buildElVerticals:function(){var t=[],n=[];this.els.each(function(r,i){var o=e(i),a=o.offset().top,l=o.outerHeight();t.push(a),n.push(a+l)}),this.tops=t,this.bottoms=n},getHorizontalIndex:function(e){this.ensureBuilt();var t=this.lefts,n=this.rights,r=t.length,o;for(o=0;o<r;o++)if(e>=t[o]&&e<n[o])return o},getVerticalIndex:function(e){this.ensureBuilt();var t=this.tops,n=this.bottoms,r=t.length,o;for(o=0;o<r;o++)if(e>=t[o]&&e<n[o])return o},getLeftOffset:function(e){return this.ensureBuilt(),this.lefts[e]},getLeftPosition:function(e){return this.ensureBuilt(),this.lefts[e]-this.origin.left},getRightOffset:function(e){return this.ensureBuilt(),this.rights[e]},getRightPosition:function(e){return this.ensureBuilt(),this.rights[e]-this.origin.left},getWidth:function(e){return this.ensureBuilt(),this.rights[e]-this.lefts[e]},getTopOffset:function(e){return this.ensureBuilt(),this.tops[e]},getTopPosition:function(e){return this.ensureBuilt(),this.tops[e]-this.origin.top},getBottomOffset:function(e){return this.ensureBuilt(),this.bottoms[e]},getBottomPosition:function(e){return this.ensureBuilt(),this.bottoms[e]-this.origin.top},getHeight:function(e){return this.ensureBuilt(),this.bottoms[e]-this.tops[e]},queryBoundingRect:function(){var e=u(this.els.eq(0));if(!e.is(document))return p(e)},isPointInBounds:function(e,t){return this.isLeftInBounds(e)&&this.isTopInBounds(t)},isLeftInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.left&&e<this.boundingRect.right},isTopInBounds:function(e){return!this.boundingRect||e>=this.boundingRect.top&&e<this.boundingRect.bottom}}),mt=qe.DragListener=ve.extend(ct,ut,{options:null,subjectEl:null,originX:null,originY:null,scrollEl:null,isInteracting:!1,isDistanceSurpassed:!1,isDelayEnded:!1,isDragging:!1,isTouch:!1,delay:null,delayTimeoutId:null,minDistance:null,handleTouchScrollProxy:null,constructor:function(e){this.options=e||{},this.handleTouchScrollProxy=ie(this,'handleTouchScroll'),this.initMouseIgnoring(500)},startInteraction:function(t,n){var r=E(t);if('mousedown'===t.type){if(this.isIgnoringMouse)return;if(!y(t))return;t.preventDefault()}this.isInteracting||(n=n||{},this.delay=K(n.delay,this.options.delay,0),this.minDistance=K(n.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,this.isInteracting=!0,this.isTouch=r,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=S(t),this.originY=w(t),this.scrollEl=u(e(t.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(t),this.startDelay(t),!this.minDistance&&this.handleDistanceSurpassed(t))},handleInteractionStart:function(e){this.trigger('interactionStart',e)},endInteraction:function(e,t){this.isInteracting&&(this.endDrag(e),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(e,t),this.isTouch&&this.tempIgnoreMouse())},handleInteractionEnd:function(e,t){this.trigger('interactionEnd',e,t||!1)},bindHandlers:function(){var t=this,n=1;this.isTouch?(this.listenTo(e(document),{touchmove:this.handleTouchMove,touchend:this.endInteraction,touchcancel:this.endInteraction,touchstart:function(e){n?n--:t.endInteraction(e,!0)}}),!C(this.handleTouchScrollProxy)&&this.scrollEl&&this.listenTo(this.scrollEl,'scroll',this.handleTouchScroll)):this.listenTo(e(document),{mousemove:this.handleMouseMove,mouseup:this.endInteraction}),this.listenTo(e(document),{selectstart:D,contextmenu:D})},unbindHandlers:function(){this.stopListeningTo(e(document)),H(this.handleTouchScrollProxy),this.scrollEl&&this.stopListeningTo(this.scrollEl,'scroll')},startDrag:function(e,t){this.startInteraction(e,t),this.isDragging||(this.isDragging=!0,this.handleDragStart(e))},handleDragStart:function(e){this.trigger('dragStart',e)},handleMove:function(e){var t=S(e)-this.originX,n=w(e)-this.originY,r=this.minDistance,i;this.isDistanceSurpassed||(i=t*t+n*n,i>=r*r&&this.handleDistanceSurpassed(e)),this.isDragging&&this.handleDrag(t,n,e)},handleDrag:function(e,t,n){this.trigger('drag',e,t,n),this.updateAutoScroll(n)},endDrag:function(e){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(e))},handleDragEnd:function(e){this.trigger('dragEnd',e)},startDelay:function(e){var t=this;this.delay?this.delayTimeoutId=setTimeout(function(){t.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)},handleDelayEnd:function(e){this.isDelayEnded=!0,this.isDistanceSurpassed&&this.startDrag(e)},handleDistanceSurpassed:function(e){this.isDistanceSurpassed=!0,this.isDelayEnded&&this.startDrag(e)},handleTouchMove:function(e){this.isDragging&&e.preventDefault(),this.handleMove(e)},handleMouseMove:function(e){this.handleMove(e)},handleTouchScroll:function(e){this.isDragging||this.endInteraction(e,!0)},trigger:function(e){this.options[e]&&this.options[e].apply(this,Array.prototype.slice.call(arguments,1)),this['_'+e]&&this['_'+e].apply(this,Array.prototype.slice.call(arguments,1))}});mt.mixin({isAutoScroll:!1,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,initAutoScroll:function(){var e=this.scrollEl;this.isAutoScroll=this.options.scroll&&e&&!e.is(window)&&!e.is(document),this.isAutoScroll&&this.listenTo(e,'scroll',oe(this.handleDebouncedScroll,100))},destroyAutoScroll:function(){this.endAutoScroll(),this.isAutoScroll&&this.stopListeningTo(this.scrollEl,'scroll')},computeScrollBounds:function(){this.isAutoScroll&&(this.scrollBounds=g(this.scrollEl))},updateAutoScroll:function(e){var t=this.scrollSensitivity,n=this.scrollBounds,r=0,i=0,o,a,l,s;n&&(o=(t-(w(e)-n.top))/t,a=(t-(n.bottom-w(e)))/t,l=(t-(S(e)-n.left))/t,s=(t-(n.right-S(e)))/t,0<=o&&1>=o?r=-1*(o*this.scrollSpeed):0<=a&&1>=a&&(r=a*this.scrollSpeed),0<=l&&1>=l?i=-1*(l*this.scrollSpeed):0<=s&&1>=s&&(i=s*this.scrollSpeed)),this.setScrollVel(r,i)},setScrollVel:function(e,t){this.scrollTopVel=e,this.scrollLeftVel=t,this.constrainScrollVel(),(this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId&&(this.scrollIntervalId=setInterval(ie(this,'scrollIntervalFunc'),this.scrollIntervalMs))},constrainScrollVel:function(){var e=this.scrollEl;0>this.scrollTopVel?0>=e.scrollTop()&&(this.scrollTopVel=0):0<this.scrollTopVel&&e.scrollTop()+e[0].clientHeight>=e[0].scrollHeight&&(this.scrollTopVel=0),0>this.scrollLeftVel?0>=e.scrollLeft()&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&e.scrollLeft()+e[0].clientWidth>=e[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var e=this.scrollEl,t=this.scrollIntervalMs/1e3;this.scrollTopVel&&e.scrollTop(e.scrollTop()+this.scrollTopVel*t),this.scrollLeftVel&&e.scrollLeft(e.scrollLeft()+this.scrollLeftVel*t),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},endAutoScroll:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},handleDebouncedScroll:function(){this.scrollIntervalId||this.handleScrollEnd()},handleScrollEnd:function(){}});var ft=mt.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(e,t){mt.call(this,t),this.component=e},handleInteractionStart:function(e){var t=this.subjectEl,n,r,i;this.computeCoords(),e?(r={left:S(e),top:w(e)},i=r,t&&(n=g(t),i=I(i,n)),this.origHit=this.queryHit(i.left,i.top),t&&this.options.subjectCenter&&(this.origHit&&(n=T(this.origHit,n)||n),i=x(n)),this.coordAdjust=R(i,r)):(this.origHit=null,this.coordAdjust=null),mt.prototype.handleInteractionStart.apply(this,arguments)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},handleDragStart:function(e){var t;mt.prototype.handleDragStart.apply(this,arguments),t=this.queryHit(S(e),w(e)),t&&this.handleHitOver(t)},handleDrag:function(e,t,n){var r;mt.prototype.handleDrag.apply(this,arguments),r=this.queryHit(S(n),w(n)),we(r,this.hit)||(this.hit&&this.handleHitOut(),r&&this.handleHitOver(r))},handleDragEnd:function(){this.handleHitDone(),mt.prototype.handleDragEnd.apply(this,arguments)},handleHitOver:function(e){var t=we(e,this.origHit);this.hit=e,this.trigger('hitOver',this.hit,t,this.origHit)},handleHitOut:function(){this.hit&&(this.trigger('hitOut',this.hit),this.handleHitDone(),this.hit=null)},handleHitDone:function(){this.hit&&this.trigger('hitDone',this.hit)},handleInteractionEnd:function(){mt.prototype.handleInteractionEnd.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},handleScrollEnd:function(){mt.prototype.handleScrollEnd.apply(this,arguments),this.computeCoords()},queryHit:function(e,t){return this.coordAdjust&&(e+=this.coordAdjust.left,t+=this.coordAdjust.top),this.component.queryHit(e,t)}}),ht=ve.extend(ct,{options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,y0:null,x0:null,topDelta:null,leftDelta:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(t,n){this.options=n=n||{},this.sourceEl=t,this.parentEl=n.parentEl?e(n.parentEl):t.parent()},start:function(t){this.isFollowing||(this.isFollowing=!0,this.y0=w(t),this.x0=S(t),this.topDelta=0,this.leftDelta=0,!this.isHidden&&this.updatePosition(),E(t)?this.listenTo(e(document),'touchmove',this.handleMove):this.listenTo(e(document),'mousemove',this.handleMove))},stop:function(t,n){function r(){i.isAnimating=!1,i.removeElement(),i.top0=i.left0=null,n&&n()}var i=this,o=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(e(document)),t&&o&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:o,complete:r})):r())},getEl:function(){var e=this.el;return e||(e=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||'').css({position:'absolute',visibility:'',display:this.isHidden?'none':'',margin:0,right:'auto',bottom:'auto',width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||'',zIndex:this.options.zIndex}),e.addClass('fc-unselectable'),e.appendTo(this.parentEl)),e},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var e,t;this.getEl(),null===this.top0&&(e=this.sourceEl.offset(),t=this.el.offsetParent().offset(),this.top0=e.top-t.top,this.left0=e.left-t.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},handleMove:function(e){this.topDelta=w(e)-this.y0,this.leftDelta=S(e)-this.x0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),vt=qe.Grid=ve.extend(ct,ut,{hasDayInteractions:!0,view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,dayDragListener:null,segDragListener:null,segResizeListener:null,externalDragListener:null,constructor:function(e){this.view=e,this.isRTL=e.opt('isRTL'),this.elsByFill={},this.dayDragListener=this.buildDayDragListener(),this.initMouseIgnoring()},computeEventTimeFormat:function(){return this.view.opt('smallTimeFormat')},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(e){this.start=e.start.clone(),this.end=e.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var e=this.view,t,n;this.eventTimeFormat=e.opt('eventTimeFormat')||e.opt('timeFormat')||this.computeEventTimeFormat(),t=e.opt('displayEventTime'),null==t&&(t=this.computeDisplayEventTime()),n=e.opt('displayEventEnd'),null==n&&(n=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=n},spanToSegs:function(){},diffDates:function(e,t){return this.largeUnit?M(e,t,this.largeUnit):N(e,t)},prepareHits:function(){},releaseHits:function(){},queryHit:function(){},getHitSpan:function(){},getHitEl:function(){},setElement:function(e){this.el=e,this.hasDayInteractions&&(b(e),this.bindDayHandler('touchstart',this.dayTouchStart),this.bindDayHandler('mousedown',this.dayMousedown)),this.bindSegHandlers(),this.bindGlobalHandlers()},bindDayHandler:function(t,n){var r=this;this.el.on(t,function(t){if(!e(t.target).is(r.segSelector+','+r.segSelector+' *,.fc-more,a[data-goto]'))return n.call(r,t)})},removeElement:function(){this.unbindGlobalHandlers(),this.clearDragListeners(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){this.listenTo(e(document),{dragstart:this.externalDragStart,sortstart:this.externalDragStart})},unbindGlobalHandlers:function(){this.stopListeningTo(e(document))},dayMousedown:function(e){this.isIgnoringMouse||this.dayDragListener.startInteraction(e,{})},dayTouchStart:function(e){var t=this.view;(t.isSelected||t.selectedEvent)&&this.tempIgnoreMouse(),this.dayDragListener.startInteraction(e,{delay:this.view.opt('longPressDelay')})},buildDayDragListener:function(){var e=this,t=this.view,n=t.opt('selectable'),r=new ft(this,{scroll:t.opt('dragScroll'),interactionStart:function(){i=r.origHit,l=null},dragStart:function(){t.unselect()},hitOver:function(t,r,a){a&&(!r&&(i=null),n&&(l=e.computeSelection(e.getHitSpan(a),e.getHitSpan(t)),l?e.renderSelection(l):!1===l&&o()))},hitOut:function(){i=null,l=null,e.unrenderSelection()},hitDone:function(){a()},interactionEnd:function(n,r){r||(i&&!e.isIgnoringMouse&&t.triggerDayClick(e.getHitSpan(i),e.getHitEl(i),n),l&&t.reportSelection(l,n))}}),i,l;return r},clearDragListeners:function(){this.dayDragListener.endInteraction(),this.segDragListener&&this.segDragListener.endInteraction(),this.segResizeListener&&this.segResizeListener.endInteraction(),this.externalDragListener&&this.externalDragListener.endInteraction()},renderEventLocationHelper:function(e,t){var n=this.fabricateHelperEvent(e,t);return this.renderHelper(n,t)},fabricateHelperEvent:function(e,t){var n=t?j(t.event):{};return n.start=e.start.clone(),n.end=e.end?e.end.clone():null,n.allDay=null,this.view.calendar.normalizeEventDates(n),n.className=(n.className||[]).concat('fc-helper'),t||(n.editable=!1),n},renderHelper:function(){},unrenderHelper:function(){},renderSelection:function(e){this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(e,t){var n=this.computeSelectionSpan(e,t);return n&&!this.view.calendar.isSelectionSpanAllowed(n)?!1:n},computeSelectionSpan:function(e,t){var n=[e.start,e.end,t.start,t.end];return n.sort(ne),{start:n[0].clone(),end:n[3].clone()}},renderHighlight:function(e){this.renderFill('highlight',this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderFill('highlight')},highlightSegClasses:function(){return['fc-highlight']},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},renderFill:function(){},unrenderFill:function(e){var t=this.elsByFill[e];t&&(t.remove(),delete this.elsByFill[e])},renderFillSegEls:function(t,n){var r=this,o=this[t+'SegEl'],a='',l=[],s;if(n.length){for(s=0;s<n.length;s++)a+=this.fillSegHtml(t,n[s]);e(a).each(function(t,i){var a=n[t],s=e(i);o&&(s=o.call(r,a,s)),s&&(s=e(s),s.is(r.fillSegTag)&&(a.el=s,l.push(a)))})}return l},fillSegTag:'div',fillSegHtml:function(e,t){var n=this[e+'SegClasses'],r=this[e+'SegCss'],i=n?n.call(this,t):[],o=J(r?r.call(this,t):{});return'<'+this.fillSegTag+(i.length?' class="'+i.join(' ')+'"':'')+(o?' style="'+o+'"':'')+' />'},getDayClasses:function(e){var t=this.view,n=t.calendar.getNow(),r=['fc-'+Qe[e.day()]];return 1==t.intervalDuration.as('months')&&e.month()!=t.intervalStart.month()&&r.push('fc-other-month'),e.isSame(n,'day')?r.push('fc-today',t.highlightStateClass):e<n?r.push('fc-past'):r.push('fc-future'),r}});vt.mixin({segSelector:'.fc-event-container > *',mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(e){var t=[],n=[],r;for(r=0;r<e.length;r++)(De(e[r])?t:n).push(e[r]);this.segs=[].concat(this.renderBgEvents(t),this.renderFgEvents(n))},renderBgEvents:function(e){var t=this.eventsToSegs(e);return this.renderBgSegs(t)||t},renderFgEvents:function(e){var t=this.eventsToSegs(e);return this.renderFgSegs(t)||t},unrenderEvents:function(){this.handleSegMouseout(),this.clearDragListeners(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},unrenderFgSegs:function(){},renderFgSegEls:function(t,n){var r=this.view,o='',a=[],l;if(t.length){for(l=0;l<t.length;l++)o+=this.fgSegHtml(t[l],n);e(o).each(function(n,i){var o=t[n],l=r.resolveEventEl(o.event,e(i));l&&(l.data('fc-seg',o),o.el=l,a.push(o))})}return a},fgSegHtml:function(){},renderBgSegs:function(e){return this.renderFill('bgEvent',e)},unrenderBgSegs:function(){this.unrenderFill('bgEvent')},bgEventSegEl:function(e,t){return this.view.resolveEventEl(e.event,t)},bgEventSegClasses:function(e){var t=e.event,n=t.source||{};return['fc-bgevent'].concat(t.className,n.className||[])},bgEventSegCss:function(e){return{"background-color":this.getSegSkinCss(e)['background-color']}},businessHoursSegClasses:function(){return['fc-nonbusiness','fc-bgevent']},buildBusinessHourSegs:function(t){var n=this.view.calendar.getCurrentBusinessHourEvents(t);return!n.length&&this.view.calendar.options.businessHours&&(n=[e.extend({},kt,{start:this.view.end,end:this.view.end,dow:null})]),this.eventsToSegs(n)},bindSegHandlers:function(){this.bindSegHandlersToEl(this.el)},bindSegHandlersToEl:function(e){this.bindSegHandlerToEl(e,'touchstart',this.handleSegTouchStart),this.bindSegHandlerToEl(e,'touchend',this.handleSegTouchEnd),this.bindSegHandlerToEl(e,'mouseenter',this.handleSegMouseover),this.bindSegHandlerToEl(e,'mouseleave',this.handleSegMouseout),this.bindSegHandlerToEl(e,'mousedown',this.handleSegMousedown),this.bindSegHandlerToEl(e,'click',this.handleSegClick)},bindSegHandlerToEl:function(t,n,r){var i=this;t.on(n,this.segSelector,function(t){var n=e(this).data('fc-seg');if(n&&!i.isDraggingSeg&&!i.isResizingSeg)return r.call(i,n,t)})},handleSegClick:function(e,t){var n=this.view.trigger('eventClick',e.el[0],e.event,t);!1===n&&t.preventDefault()},handleSegMouseover:function(e,t){this.isIgnoringMouse||this.mousedOverSeg||(this.mousedOverSeg=e,this.view.isEventResizable(e.event)&&e.el.addClass('fc-allow-mouse-resize'),this.view.trigger('eventMouseover',e.el[0],e.event,t))},handleSegMouseout:function(e,t){t=t||{},this.mousedOverSeg&&(e=e||this.mousedOverSeg,this.mousedOverSeg=null,this.view.isEventResizable(e.event)&&e.el.removeClass('fc-allow-mouse-resize'),this.view.trigger('eventMouseout',e.el[0],e.event,t))},handleSegMousedown:function(e,t){var n=this.startSegResize(e,t,{distance:5});!n&&this.view.isEventDraggable(e.event)&&this.buildSegDragListener(e).startInteraction(t,{distance:5})},handleSegTouchStart:function(e,t){var n=this.view,r=e.event,i=n.isEventSelected(r),o=n.isEventDraggable(r),a=n.isEventResizable(r),l=!1,s;i&&a&&(l=this.startSegResize(e,t)),!l&&(o||a)&&(s=o?this.buildSegDragListener(e):this.buildSegSelectListener(e),s.startInteraction(t,{delay:i?0:this.view.opt('longPressDelay')})),this.tempIgnoreMouse()},handleSegTouchEnd:function(){this.tempIgnoreMouse()},startSegResize:function(t,n,r){return!!e(n.target).is('.fc-resizer')&&(this.buildSegResizeListener(t,e(n.target).is('.fc-start-resizer')).startInteraction(n,r),!0)},buildSegDragListener:function(e){var t=this,n=this.view,r=n.calendar,i=e.el,l=e.event,s,d,c;if(this.segDragListener)return this.segDragListener;var u=this.segDragListener=new ft(n,{scroll:n.opt('dragScroll'),subjectEl:i,subjectCenter:!0,interactionStart:function(r){e.component=t,s=!1,d=new ht(e.el,{additionalClass:'fc-dragging',parentEl:n.el,opacity:u.isTouch?null:n.opt('dragOpacity'),revertDuration:n.opt('dragRevertDuration'),zIndex:2}),d.hide(),d.start(r)},dragStart:function(r){u.isTouch&&!n.isEventSelected(l)&&n.selectEvent(l),s=!0,t.handleSegMouseout(e,r),t.segDragStart(e,r),n.hideEvent(l)},hitOver:function(i,a,s){var g;e.hit&&(s=e.hit),c=t.computeEventDrop(s.component.getHitSpan(s),i.component.getHitSpan(i),l),c&&!r.isEventSpanAllowed(t.eventToSpan(c),l)&&(o(),c=null),c&&(g=n.renderDrag(c,e))?(g.addClass('fc-dragging'),!u.isTouch&&t.applyDragOpacity(g),d.hide()):d.show(),a&&(c=null)},hitOut:function(){n.unrenderDrag(),d.show(),c=null},hitDone:function(){a()},interactionEnd:function(r){delete e.component,d.stop(!c,function(){s&&(n.unrenderDrag(),n.showEvent(l),t.segDragStop(e,r)),c&&n.reportEventDrop(l,c,this.largeUnit,i,r)}),t.segDragListener=null}});return u},buildSegSelectListener:function(e){var t=this,n=this.view,r=e.event;if(this.segDragListener)return this.segDragListener;var i=this.segDragListener=new mt({dragStart:function(){i.isTouch&&!n.isEventSelected(r)&&n.selectEvent(r)},interactionEnd:function(){t.segDragListener=null}});return i},segDragStart:function(e,t){this.isDraggingSeg=!0,this.view.trigger('eventDragStart',e.el[0],e.event,t,{})},segDragStop:function(e,t){this.isDraggingSeg=!1,this.view.trigger('eventDragStop',e.el[0],e.event,t,{})},computeEventDrop:function(e,t,n){var r=this.view.calendar,i=e.start,o=t.start,a,l;return i.hasTime()===o.hasTime()?(a=this.diffDates(o,i),n.allDay&&P(a)?(l={start:n.start.clone(),end:r.getEventEnd(n),allDay:!1},r.normalizeEventTimes(l)):l=be(n),l.start.add(a),l.end&&l.end.add(a)):l={start:o.clone(),end:null,allDay:!o.hasTime()},l},applyDragOpacity:function(e){var t=this.view.opt('dragOpacity');null!=t&&e.css('opacity',t)},externalDragStart:function(t,n){var r=this.view,i,o;r.opt('droppable')&&(i=e((n?n.item:null)||t.target),o=r.opt('dropAccept'),(e.isFunction(o)?o.call(i[0],i):i.is(o))&&!this.isDraggingExternal&&this.listenToExternalDrag(i,t,n))},listenToExternalDrag:function(e,t,n){var r=this,i=this.view.calendar,l=xe(e),s=r.externalDragListener=new ft(this,{interactionStart:function(){r.isDraggingExternal=!0},hitOver:function(e){d=r.computeExternalDrop(e.component.getHitSpan(e),l),d&&!i.isExternalSpanAllowed(r.eventToSpan(d),d,l.eventProps)&&(o(),d=null),d&&r.renderDrag(d)},hitOut:function(){d=null},hitDone:function(){a(),r.unrenderDrag()},interactionEnd:function(t){d&&r.view.reportExternalDrop(l,d,e,t,n),r.isDraggingExternal=!1,r.externalDragListener=null}}),d;s.startDrag(t)},computeExternalDrop:function(e,t){var n=this.view.calendar,r={start:n.applyTimezone(e.start),end:null};return t.startTime&&!r.start.hasTime()&&r.start.time(t.startTime),t.duration&&(r.end=r.start.clone().add(t.duration)),r},renderDrag:function(){},unrenderDrag:function(){},buildSegResizeListener:function(e,t){var n=this,r=this.view,i=r.calendar,l=e.el,s=e.event,d=i.getEventEnd(s),c=this.segResizeListener=new ft(this,{scroll:r.opt('dragScroll'),subjectEl:l,interactionStart:function(){u=!1},dragStart:function(t){u=!0,n.handleSegMouseout(e,t),n.segResizeStart(e,t)},hitOver:function(a,l,c){var u=n.getHitSpan(c),p=n.getHitSpan(a);g=t?n.computeEventStartResize(u,p,s):n.computeEventEndResize(u,p,s),g&&(i.isEventSpanAllowed(n.eventToSpan(g),s)?g.start.isSame(s.start.clone().stripZone())&&g.end.isSame(d.clone().stripZone())&&(g=null):(o(),g=null)),g&&(r.hideEvent(s),n.renderEventResize(g,e))},hitOut:function(){g=null},hitDone:function(){n.unrenderEventResize(),r.showEvent(s),a()},interactionEnd:function(t){u&&n.segResizeStop(e,t),g&&r.reportEventResize(s,g,this.largeUnit,l,t),n.segResizeListener=null}}),u,g;return c},segResizeStart:function(e,t){this.isResizingSeg=!0,this.view.trigger('eventResizeStart',e.el[0],e.event,t,{})},segResizeStop:function(e,t){this.isResizingSeg=!1,this.view.trigger('eventResizeStop',e.el[0],e.event,t,{})},computeEventStartResize:function(e,t,n){return this.computeEventResize('start',e,t,n)},computeEventEndResize:function(e,t,n){return this.computeEventResize('end',e,t,n)},computeEventResize:function(e,t,n,r){var i=this.view.calendar,o=this.diffDates(n[e],t[e]),a,l;return a={start:r.start.clone(),end:i.getEventEnd(r),allDay:r.allDay},a.allDay&&P(o)&&(a.allDay=!1,i.normalizeEventTimes(a)),a[e].add(o),a.start.isBefore(a.end)||(l=this.minResizeDuration||(r.allDay?i.defaultAllDayEventDuration:i.defaultTimedEventDuration),'start'==e?a.start=a.end.clone().subtract(l):a.end=a.start.clone().add(l)),a},renderEventResize:function(){},unrenderEventResize:function(){},getEventTimeText:function(e,t,n){return null==t&&(t=this.eventTimeFormat),null==n&&(n=this.displayEventEnd),this.displayEventTime&&e.start.hasTime()?n&&e.end?this.view.formatRange(e,t):e.start.format(t):''},getSegClasses:function(e,t,n){var r=this.view,i=['fc-event',e.isStart?'fc-start':'fc-not-start',e.isEnd?'fc-end':'fc-not-end'].concat(this.getSegCustomClasses(e));return t&&i.push('fc-draggable'),n&&i.push('fc-resizable'),r.isEventSelected(e.event)&&i.push('fc-selected'),i},getSegCustomClasses:function(e){var t=e.event;return[].concat(t.className,t.source?t.source.className:[])},getSegSkinCss:function(e){return{"background-color":this.getSegBackgroundColor(e),"border-color":this.getSegBorderColor(e),color:this.getSegTextColor(e)}},getSegBackgroundColor:function(e){return e.event.backgroundColor||e.event.color||this.getSegDefaultBackgroundColor(e)},getSegDefaultBackgroundColor:function(e){var t=e.event.source||{};return t.backgroundColor||t.color||this.view.opt('eventBackgroundColor')||this.view.opt('eventColor')},getSegBorderColor:function(e){return e.event.borderColor||e.event.color||this.getSegDefaultBorderColor(e)},getSegDefaultBorderColor:function(e){var t=e.event.source||{};return t.borderColor||t.color||this.view.opt('eventBorderColor')||this.view.opt('eventColor')},getSegTextColor:function(e){return e.event.textColor||this.getSegDefaultTextColor(e)},getSegDefaultTextColor:function(e){var t=e.event.source||{};return t.textColor||this.view.opt('eventTextColor')},eventToSegs:function(e){return this.eventsToSegs([e])},eventToSpan:function(e){return this.eventToSpans(e)[0]},eventToSpans:function(e){var t=this.eventToRange(e);return this.eventRangeToSpans(t,e)},eventsToSegs:function(t,n){var r=this,i=Te(t),o=[];return e.each(i,function(e,t){var a=[],l;for(l=0;l<t.length;l++)a.push(r.eventToRange(t[l]));if(Ce(t[0]))for(a=r.invertRanges(a),l=0;l<a.length;l++)o.push.apply(o,r.eventRangeToSegs(a[l],t[0],n));else for(l=0;l<a.length;l++)o.push.apply(o,r.eventRangeToSegs(a[l],t[l],n))}),o},eventToRange:function(e){var t=this.view.calendar,n=e.start.clone().stripZone(),r=(e.end?e.end.clone():t.getDefaultEventEnd(null==e.allDay?!e.start.hasTime():e.allDay,e.start)).stripZone();return t.localizeMoment(n),t.localizeMoment(r),{start:n,end:r}},eventRangeToSegs:function(e,t,n){var r=this.eventRangeToSpans(e,t),o=[],a;for(a=0;a<r.length;a++)o.push.apply(o,this.eventSpanToSegs(r[a],t,n));return o},eventRangeToSpans:function(t){return[e.extend({},t)]},eventSpanToSegs:function(e,t,n){var r=n?n(e):this.spanToSegs(e),o,i;for(o=0;o<r.length;o++)i=r[o],i.event=t,i.eventStartMS=+e.start,i.eventDurationMS=e.end-e.start;return r},invertRanges:function(e){var t=this.view,n=t.start.clone(),r=t.end.clone(),o=[],a=n,l,i;for(e.sort(Ie),l=0;l<e.length;l++)i=e[l],i.start>a&&o.push({start:a,end:i.start}),a=i.end;return a<r&&o.push({start:a,end:r}),o},sortEventSegs:function(e){e.sort(ie(this,'compareEventSegs'))},compareEventSegs:function(e,t){return e.eventStartMS-t.eventStartMS||t.eventDurationMS-e.eventDurationMS||t.event.allDay-e.event.allDay||L(e.event,t.event,this.view.eventOrderSpecs)}}),qe.pluckEventDateProps=be,qe.isBgEvent=De,qe.dataAttrPrefix='';var yt=qe.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var e=this.view,t=this.start.clone(),n=-1,r=[],i=[],o,a,l;t.isBefore(this.end);)e.isHiddenDay(t)?r.push(n+0.5):(n++,r.push(n),i.push(t.clone())),t.add(1,'days');if(this.breakOnWeeks){for(a=i[0].day(),o=1;o<i.length&&i[o].day()!=a;o++);l=Pe(i.length/o)}else l=1,o=i.length;this.dayDates=i,this.dayIndices=r,this.daysPerRow=o,this.rowCnt=l,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt('columnFormat')||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(e,t){return this.dayDates[this.getCellDayIndex(e,t)].clone()},getCellRange:function(e,t){var n=this.getCellDate(e,t),r=n.clone().add(1,'days');return{start:n,end:r}},getCellDayIndex:function(e,t){return e*this.daysPerRow+this.getColDayIndex(t)},getColDayIndex:function(e){return this.isRTL?this.colCnt-1-e:e},getDateDayIndex:function(e){var t=this.dayIndices,n=e.diff(this.start,'days');return 0>n?t[0]-1:n>=t.length?t[t.length-1]+1:t[n]},computeColHeadFormat:function(){return 1<this.rowCnt||10<this.colCnt?'ddd':1<this.colCnt?this.view.opt('dayOfMonthFormat'):'dddd'},sliceRangeByRow:function(e){var t=this.daysPerRow,n=this.view.computeDayRange(e),r=this.getDateDayIndex(n.start),i=this.getDateDayIndex(n.end.clone().subtract(1,'days')),o=[],a,l,s,d,c;for(a=0;a<this.rowCnt;a++)l=a*t,s=l+t-1,d=je(r,l),c=We(i,s),d=Pe(d),c=Ue(c),d<=c&&o.push({row:a,firstRowDayIndex:d-l,lastRowDayIndex:c-l,isStart:d===r,isEnd:c===i});return o},sliceRangeByDay:function(e){var t=this.daysPerRow,n=this.view.computeDayRange(e),r=this.getDateDayIndex(n.start),o=this.getDateDayIndex(n.end.clone().subtract(1,'days')),a=[],l,s,d,c,i,u;for(l=0;l<this.rowCnt;l++)for(s=l*t,d=s+t-1,c=s;c<=d;c++)i=je(r,c),u=We(o,c),i=Pe(i),u=Ue(u),i<=u&&a.push({row:l,firstRowDayIndex:i-s,lastRowDayIndex:u-s,isStart:i===r,isEnd:u===o});return a},renderHeadHtml:function(){var e=this.view;return'<div class="fc-row '+e.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+'</thead></table></div>'},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return'<tr>'+(this.isRTL?'':this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():'')+'</tr>'},renderHeadDateCellsHtml:function(){var e=[],t,n;for(t=0;t<this.colCnt;t++)n=this.getCellDate(0,t),e.push(this.renderHeadDateCellHtml(n));return e.join('')},renderHeadDateCellHtml:function(e,t,n){var r=this.view;return'<th class="fc-day-header '+r.widgetHeaderClass+' fc-'+Qe[e.day()]+'"'+(1===this.rowCnt?' data-date="'+e.format('YYYY-MM-DD')+'"':'')+(1<t?' colspan="'+t+'"':'')+(n?' '+n:'')+'>'+r.buildGotoAnchorHtml({date:e,forceOff:1<this.rowCnt||1===this.colCnt},Q(e.format(this.colHeadFormat)))+'</th>'},renderBgTrHtml:function(e){return'<tr>'+(this.isRTL?'':this.renderBgIntroHtml(e))+this.renderBgCellsHtml(e)+(this.isRTL?this.renderBgIntroHtml(e):'')+'</tr>'},renderBgIntroHtml:function(){return this.renderIntroHtml()},renderBgCellsHtml:function(e){var t=[],n,r;for(n=0;n<this.colCnt;n++)r=this.getCellDate(e,n),t.push(this.renderBgCellHtml(r));return t.join('')},renderBgCellHtml:function(e,t){var n=this.view,r=this.getDayClasses(e);return r.unshift('fc-day',n.widgetContentClass),'<td class="'+r.join(' ')+'" data-date="'+e.format('YYYY-MM-DD')+'"'+(t?' '+t:'')+'></td>'},renderIntroHtml:function(){},bookendCells:function(e){var t=this.renderIntroHtml();t&&(this.isRTL?e.append(t):e.prepend(t))}},St=qe.DayGrid=vt.extend(yt,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(e){var t=this.view,n=this.rowCnt,r=this.colCnt,i='',o,a;for(o=0;o<n;o++)i+=this.renderDayRowHtml(o,e);for(this.el.html(i),this.rowEls=this.el.find('.fc-row'),this.cellEls=this.el.find('.fc-day'),this.rowCoordCache=new pt({els:this.rowEls,isVertical:!0}),this.colCoordCache=new pt({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),o=0;o<n;o++)for(a=0;a<r;a++)t.trigger('dayRender',null,this.getCellDate(o,a),this.getCellEl(o,a))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var e=this.buildBusinessHourSegs(!0);this.renderFill('businessHours',e,'bgevent')},unrenderBusinessHours:function(){this.unrenderFill('businessHours')},renderDayRowHtml:function(e,t){var n=this.view,r=['fc-row','fc-week',n.widgetContentClass];return t&&r.push('fc-rigid'),'<div class="'+r.join(' ')+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(e)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?'<thead>'+this.renderNumberTrHtml(e)+'</thead>':'')+'</table></div></div>'},renderNumberTrHtml:function(e){return'<tr>'+(this.isRTL?'':this.renderNumberIntroHtml(e))+this.renderNumberCellsHtml(e)+(this.isRTL?this.renderNumberIntroHtml(e):'')+'</tr>'},renderNumberIntroHtml:function(){return this.renderIntroHtml()},renderNumberCellsHtml:function(e){var t=[],n,r;for(n=0;n<this.colCnt;n++)r=this.getCellDate(e,n),t.push(this.renderNumberCellHtml(r));return t.join('')},renderNumberCellHtml:function(e){var t='',n,r;return this.view.dayNumbersVisible||this.view.cellWeekNumbersVisible?(n=this.getDayClasses(e),n.unshift('fc-day-top'),this.view.cellWeekNumbersVisible&&('ISO'===e._locale._fullCalendar_weekCalc?r=1:r=e._locale.firstDayOfWeek()),t+='<td class="'+n.join(' ')+'" data-date="'+e.format()+'">',this.view.cellWeekNumbersVisible&&e.day()==r&&(t+=this.view.buildGotoAnchorHtml({date:e,type:'week'},{class:'fc-week-number'},e.format('w'))),this.view.dayNumbersVisible&&(t+=this.view.buildGotoAnchorHtml(e,{class:'fc-day-number'},e.date())),t+='</td>',t):'<td/>'},computeEventTimeFormat:function(){return this.view.opt('extraSmallTimeFormat')},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(e){var t=this.sliceRangeByRow(e),n,r;for(n=0;n<t.length;n++)r=t[n],this.isRTL?(r.leftCol=this.daysPerRow-1-r.lastRowDayIndex,r.rightCol=this.daysPerRow-1-r.firstRowDayIndex):(r.leftCol=r.firstRowDayIndex,r.rightCol=r.lastRowDayIndex);return t},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(e,t){if(this.colCoordCache.isLeftInBounds(e)&&this.rowCoordCache.isTopInBounds(t)){var n=this.colCoordCache.getHorizontalIndex(e),r=this.rowCoordCache.getVerticalIndex(t);if(null!=r&&null!=n)return this.getCellHit(r,n)}},getHitSpan:function(e){return this.getCellRange(e.row,e.col)},getHitEl:function(e){return this.getCellEl(e.row,e.col)},getCellHit:function(e,t){return{row:e,col:t,component:this,left:this.colCoordCache.getLeftOffset(t),right:this.colCoordCache.getRightOffset(t),top:this.rowCoordCache.getTopOffset(e),bottom:this.rowCoordCache.getBottomOffset(e)}},getCellEl:function(e,t){return this.cellEls.eq(e*this.colCnt+t)},renderDrag:function(e,t){if(this.renderHighlight(this.eventToSpan(e)),t&&t.component!==this)return this.renderEventLocationHelper(e,t)},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(e,t){return this.renderHighlight(this.eventToSpan(e)),this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(t,n){var r=[],i=this.eventToSegs(t),o;return i=this.renderFgSegEls(i),o=this.renderSegRows(i),this.rowEls.each(function(t,i){var a=e(i),l=e('<div class="fc-helper-skeleton"><table/></div>'),s;s=n&&n.row===t?n.el.position().top:a.find('.fc-content-skeleton tbody').position().top,l.css('top',s).find('table').append(o[t].tbodyEl),a.append(l),r.push(l[0])}),this.helperEls=e(r)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:'td',renderFill:function(t,n,r){var o=[],a,i,l;for(n=this.renderFillSegEls(t,n),a=0;a<n.length;a++)i=n[a],l=this.renderFillRow(t,i,r),this.rowEls.eq(i.row).append(l),o.push(l[0]);return this.elsByFill[t]=e(o),n},renderFillRow:function(t,n,r){var i=this.colCnt,o=n.leftCol,a=n.rightCol+1,l,s;return r=r||t.toLowerCase(),l=e('<div class="fc-'+r+'-skeleton"><table><tr/></table></div>'),s=l.find('tr'),0<o&&s.append('<td colspan="'+o+'"/>'),s.append(n.el.attr('colspan',a-o)),a<i&&s.append('<td colspan="'+(i-a)+'"/>'),this.bookendCells(s),l}});St.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),vt.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return vt.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(t){var n=e.grep(t,function(e){return e.event.allDay});return vt.prototype.renderBgSegs.call(this,n)},renderFgSegs:function(t){var n;return t=this.renderFgSegEls(t),n=this.rowStructs=this.renderSegRows(t),this.rowEls.each(function(t,r){e(r).find('.fc-content-skeleton > table').append(n[t].tbodyEl)}),t},unrenderFgSegs:function(){for(var e=this.rowStructs||[],t;t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(e){var t=[],n,r;for(n=this.groupSegRows(e),r=0;r<n.length;r++)t.push(this.renderSegRow(r,n[r]));return t},fgSegHtml:function(e,t){var n=this.view,r=e.event,i=n.isEventDraggable(r),o=!t&&r.allDay&&e.isStart&&n.isEventResizableFromStart(r),a=!t&&r.allDay&&e.isEnd&&n.isEventResizableFromEnd(r),l=this.getSegClasses(e,i,o||a),s=J(this.getSegSkinCss(e)),d='',c,u;return l.unshift('fc-day-grid-event','fc-h-event'),e.isStart&&(c=this.getEventTimeText(r),c&&(d='<span class="fc-time">'+Q(c)+'</span>')),u='<span class="fc-title" title="'+Q(r.title)+'">'+(Q(r.title||'')||'&nbsp;')+'</span>','<a class="'+l.join(' ')+'"'+(r.url?' target="_blank" href="'+Q(r.url)+'"':'')+(s?' style="'+s+'"':'')+'><div class="fc-content">'+(this.isRTL?u+' '+d:d+' '+u)+'</div>'+(o?'<div class="fc-resizer fc-start-resizer" />':'')+(a?'<div class="fc-resizer fc-end-resizer" />':'')+'</a>'},renderSegRow:function(t,n){function r(t){for(;p<t;)v=(u[g-1]||[])[p],v?v.attr('rowspan',parseInt(v.attr('rowspan')||1,10)+1):(v=e('<td/>'),m.append(v)),c[g][p]=v,u[g][p]=v,p++}var o=this.colCnt,a=this.buildSegLevels(n),l=je(1,a.length),s=e('<tbody/>'),d=[],c=[],u=[],g,i,p,m,f,h,v;for(g=0;g<l;g++){if(i=a[g],p=0,m=e('<tr/>'),d.push([]),c.push([]),u.push([]),i)for(f=0;f<i.length;f++){for(h=i[f],r(h.leftCol),v=e('<td class="fc-event-container"/>').append(h.el),h.leftCol==h.rightCol?u[g][p]=v:v.attr('colspan',h.rightCol-h.leftCol+1);p<=h.rightCol;)c[g][p]=v,d[g][p]=h,p++;m.append(v)}r(o),this.bookendCells(m),s.append(m)}return{row:t,tbodyEl:s,cellMatrix:c,segMatrix:d,segLevels:a,segs:n}},buildSegLevels:function(e){var t=[],n,r,i;for(this.sortEventSegs(e),n=0;n<e.length;n++){for(r=e[n],i=0;i<t.length&&!!Re(r,t[i]);i++);r.level=i,(t[i]||(t[i]=[])).push(r)}for(i=0;i<t.length;i++)t[i].sort(ke);return t},groupSegRows:function(e){var t=[],n;for(n=0;n<this.rowCnt;n++)t.push([]);for(n=0;n<e.length;n++)t[e[n].row].push(e[n]);return t}}),St.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(e){var t=this.rowStructs||[],n,r;for(n=0;n<t.length;n++)this.unlimitRow(n),r=!!e&&('number'===typeof e?e:this.computeRowLevelLimit(n)),!1!==r&&this.limitRow(n,r)},computeRowLevelLimit:function(t){function n(t,n){s=je(s,e(n).outerHeight())}var r=this.rowEls.eq(t),o=r.height(),a=this.rowStructs[t].tbodyEl.children(),l,i,s;for(l=0;l<a.length;l++)if(i=a.eq(l).removeClass('fc-limited'),s=0,i.find('> td > :first-child').each(n),i.position().top+s>o)return l;return!1},limitRow:function(t,n){function r(r){for(;s<r;)p=o.getCellSegs(t,s,n),p.length&&(h=c[n-1][s],b=o.renderMoreLink(t,s,p),E=e('<div/>').append(b),h.append(E),l.push(E[0])),s++}var o=this,a=this.rowStructs[t],l=[],s=0,d,c,u,g,i,p,m,f,h,v,y,S,w,E,b;if(n&&n<a.segLevels.length){for(d=a.segLevels[n-1],c=a.cellMatrix,u=a.tbodyEl.children().slice(n).addClass('fc-limited').get(),g=0;g<d.length;g++){for(i=d[g],r(i.leftCol),f=[],m=0;s<=i.rightCol;)p=this.getCellSegs(t,s,n),f.push(p),m+=p.length,s++;if(m){for(h=c[n-1][i.leftCol],v=h.attr('rowspan')||1,y=[],S=0;S<f.length;S++)w=e('<td class="fc-more-cell"/>').attr('rowspan',v),p=f[S],b=this.renderMoreLink(t,i.leftCol+S,[i].concat(p)),E=e('<div/>').append(b),w.append(E),y.push(w[0]),l.push(w[0]);h.addClass('fc-limited').after(e(y)),u.push(h[0])}}r(this.colCnt),a.moreEls=e(l),a.limitedEls=e(u)}},unlimitRow:function(e){var t=this.rowStructs[e];t.moreEls&&(t.moreEls.remove(),t.moreEls=null),t.limitedEls&&(t.limitedEls.removeClass('fc-limited'),t.limitedEls=null)},renderMoreLink:function(t,n,r){var i=this,o=this.view;return e('<a class="fc-more"/>').text(this.getMoreLinkText(r.length)).on('click',function(a){var l=o.opt('eventLimitClick'),s=i.getCellDate(t,n),d=e(this),c=i.getCellEl(t,n),u=i.getCellSegs(t,n),g=i.resliceDaySegs(u,s),p=i.resliceDaySegs(r,s);'function'===typeof l&&(l=o.trigger('eventLimitClick',null,{date:s,dayEl:c,moreEl:d,segs:g,hiddenSegs:p},a)),'popover'===l?i.showSegPopover(t,n,d,g):'string'===typeof l&&o.calendar.zoomTo(s,l)})},showSegPopover:function(e,t,n,r){var i=this,o=this.view,a=n.parent(),l,s;l=1==this.rowCnt?o.el:this.rowEls.eq(e),s={className:'fc-more-popover',content:this.renderSegPopoverContent(e,t,r),parentEl:this.view.el,top:l.offset().top,autoHide:!0,viewportConstrain:o.opt('popoverViewportConstrain'),hide:function(){i.segPopover.removeElement(),i.segPopover=null,i.popoverSegs=null}},this.isRTL?s.right=a.offset().left+a.outerWidth()+1:s.left=a.offset().left-1,this.segPopover=new gt(s),this.segPopover.show(),this.bindSegHandlersToEl(this.segPopover.el)},renderSegPopoverContent:function(t,n,r){var o=this.view,a=o.opt('theme'),l=this.getCellDate(t,n).format(o.opt('dayPopoverFormat')),s=e('<div class="fc-header '+o.widgetHeaderClass+'"><span class="fc-close '+(a?'ui-icon ui-icon-closethick':'fc-icon fc-icon-x')+'"></span><span class="fc-title">'+Q(l)+'</span><div class="fc-clear"/></div><div class="fc-body '+o.widgetContentClass+'"><div class="fc-event-container"></div></div>'),d=s.find('.fc-event-container'),c;for(r=this.renderFgSegEls(r,!0),this.popoverSegs=r,c=0;c<r.length;c++)this.prepareHits(),r[c].hit=this.getCellHit(t,n),this.releaseHits(),d.append(r[c].el);return s},resliceDaySegs:function(t,n){var r=e.map(t,function(e){return e.event}),i=n.clone(),o=i.clone().add(1,'days'),a={start:i,end:o};return t=this.eventsToSegs(r,function(e){var t=F(e,a);return t?[t]:[]}),this.sortEventSegs(t),t},getMoreLinkText:function(e){var t=this.view.opt('eventLimitText');return'function'===typeof t?t(e):'+'+e+' '+t},getCellSegs:function(e,t,n){for(var r=this.rowStructs[e].segMatrix,i=n||0,o=[],a;i<r.length;)a=r[i][t],a&&o.push(a),i++;return o}});var wt=qe.TimeGrid=vt.extend(yt,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatContainerEl:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){vt.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find('.fc-day'),this.slatContainerEl=this.el.find('.fc-slats'),this.slatEls=this.slatContainerEl.find('tr'),this.colCoordCache=new pt({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new pt({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+'</table></div>'},renderSlatRowHtml:function(){for(var e=this.view,t=this.isRTL,n='',i=r.duration(+this.minTime),o,a,l;i<this.maxTime;)o=this.start.clone().time(i),a=re(V(i,this.labelInterval)),l='<td class="fc-axis fc-time '+e.widgetContentClass+'" '+e.axisStyleAttr()+'>'+(a?'<span>'+Q(o.format(this.labelFormat))+'</span>':'')+'</td>',n+='<tr data-time="'+o.format('HH:mm:ss')+'"'+(a?'':' class="fc-minor"')+'>'+(t?'':l)+'<td class="'+e.widgetContentClass+'"/>'+(t?l:'')+'</tr>',i.add(this.slotDuration);return n},processOptions:function(){var t=this.view,n=t.opt('slotDuration'),i=t.opt('snapDuration'),o;n=r.duration(n),i=i?r.duration(i):n,this.slotDuration=n,this.snapDuration=i,this.snapsPerSlot=n/i,this.minResizeDuration=i,this.minTime=r.duration(t.opt('minTime')),this.maxTime=r.duration(t.opt('maxTime')),o=t.opt('slotLabelFormat'),e.isArray(o)&&(o=o[o.length-1]),this.labelFormat=o||t.opt('smallTimeFormat'),o=t.opt('slotLabelInterval'),this.labelInterval=o?r.duration(o):this.computeLabelInterval(n)},computeLabelInterval:function(e){var t,n,i;for(t=Mt.length-1;0<=t;t--)if(n=r.duration(Mt[t]),i=V(n,e),re(i)&&1<i)return n;return r.duration(e)},computeEventTimeFormat:function(){return this.view.opt('noMeridiemTimeFormat')},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(e,t){var n=this.snapsPerSlot,r=this.colCoordCache,i=this.slatCoordCache;if(r.isLeftInBounds(e)&&i.isTopInBounds(t)){var o=r.getHorizontalIndex(e),a=i.getVerticalIndex(t);if(null!=o&&null!=a){var l=i.getTopOffset(a),s=i.getHeight(a),d=Ue((t-l)/s*n);return{col:o,snap:a*n+d,component:this,left:r.getLeftOffset(o),right:r.getRightOffset(o),top:l+d/n*s,bottom:l+(d+1)/n*s}}}},getHitSpan:function(e){var t=this.getCellDate(0,e.col),n=this.computeSnapTime(e.snap),r;return t.time(n),r=t.clone().add(this.snapDuration),{start:t,end:r}},getHitEl:function(e){return this.colEls.eq(e.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(e){return r.duration(this.minTime+this.snapDuration*e)},spanToSegs:function(e){var t=this.sliceRangeByTimes(e),n;for(n=0;n<t.length;n++)t[n].col=this.isRTL?this.daysPerRow-1-t[n].dayIndex:t[n].dayIndex;return t},sliceRangeByTimes:function(e){var t=[],n,r,i,o;for(r=0;r<this.daysPerRow;r++)i=this.dayDates[r].clone(),o={start:i.clone().time(this.minTime),end:i.clone().time(this.maxTime)},n=F(e,o),n&&(n.dayIndex=r,t.push(n));return t},updateSize:function(e){this.slatCoordCache.build(),e&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},getTotalSlatHeight:function(){return this.slatContainerEl.outerHeight()},computeDateTop:function(e,t){return this.computeTimeTop(r.duration(e-t.clone().stripTime()))},computeTimeTop:function(e){var t=this.slatEls.length,n=(e-this.minTime)/this.slotDuration,r,i;return n=je(0,n),n=We(t,n),r=Ue(n),r=We(r,t-1),i=n-r,this.slatCoordCache.getTopPosition(r)+this.slatCoordCache.getHeight(r)*i},renderDrag:function(e,t){return t?this.renderEventLocationHelper(e,t):void this.renderHighlight(this.eventToSpan(e))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(e,t){return this.renderEventLocationHelper(e,t)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(e,t){return this.renderHelperSegs(this.eventToSegs(e),t)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){this.renderBusinessSegs(this.buildBusinessHourSegs())},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return'minute'},renderNowIndicator:function(t){var n=this.spanToSegs({start:t,end:t}),r=this.computeDateTop(t,t),o=[],a;for(a=0;a<n.length;a++)o.push(e('<div class="fc-now-indicator fc-now-indicator-line"></div>').css('top',r).appendTo(this.colContainerEls.eq(n[a].col))[0]);0<n.length&&o.push(e('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css('top',r).appendTo(this.el.find('.fc-content-skeleton'))[0]),this.nowIndicatorEls=e(o)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(e){this.view.opt('selectHelper')?this.renderEventLocationHelper(e):this.renderHighlight(e)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(e){this.renderHighlightSegs(this.spanToSegs(e))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});wt.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var t='',n,r;for(n=0;n<this.colCnt;n++)t+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';r=e('<div class="fc-content-skeleton"><table><tr>'+t+'</tr></table></div>'),this.colContainerEls=r.find('.fc-content-col'),this.helperContainerEls=r.find('.fc-helper-container'),this.fgContainerEls=r.find('.fc-event-container:not(.fc-helper-container)'),this.bgContainerEls=r.find('.fc-bgevent-container'),this.highlightContainerEls=r.find('.fc-highlight-container'),this.businessContainerEls=r.find('.fc-business-container'),this.bookendCells(r.find('tr')),this.el.append(r)},renderFgSegs:function(e){return e=this.renderFgSegsIntoContainers(e,this.fgContainerEls),this.fgSegs=e,e},unrenderFgSegs:function(){this.unrenderNamedSegs('fgSegs')},renderHelperSegs:function(t,n){var r=[],o,i,a;for(t=this.renderFgSegsIntoContainers(t,this.helperContainerEls),o=0;o<t.length;o++)i=t[o],n&&n.col===i.col&&(a=n.el,i.el.css({left:a.css('left'),right:a.css('right'),"margin-left":a.css('margin-left'),"margin-right":a.css('margin-right')})),r.push(i.el[0]);return this.helperSegs=t,e(r)},unrenderHelperSegs:function(){this.unrenderNamedSegs('helperSegs')},renderBgSegs:function(e){return e=this.renderFillSegEls('bgEvent',e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.bgContainerEls),this.bgSegs=e,e},unrenderBgSegs:function(){this.unrenderNamedSegs('bgSegs')},renderHighlightSegs:function(e){e=this.renderFillSegEls('highlight',e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.highlightContainerEls),this.highlightSegs=e},unrenderHighlightSegs:function(){this.unrenderNamedSegs('highlightSegs')},renderBusinessSegs:function(e){e=this.renderFillSegEls('businessHours',e),this.updateSegVerticals(e),this.attachSegsByCol(this.groupSegsByCol(e),this.businessContainerEls),this.businessSegs=e},unrenderBusinessSegs:function(){this.unrenderNamedSegs('businessSegs')},groupSegsByCol:function(e){var t=[],n;for(n=0;n<this.colCnt;n++)t.push([]);for(n=0;n<e.length;n++)t[e[n].col].push(e[n]);return t},attachSegsByCol:function(e,t){var n,r,o;for(n=0;n<this.colCnt;n++)for(r=e[n],o=0;o<r.length;o++)t.eq(n).append(r[o].el)},unrenderNamedSegs:function(e){var t=this[e],n;if(t){for(n=0;n<t.length;n++)t[n].el.remove();this[e]=null}},renderFgSegsIntoContainers:function(e,t){var n,r;for(e=this.renderFgSegEls(e),n=this.groupSegsByCol(e),r=0;r<this.colCnt;r++)this.updateFgSegCoords(n[r]);return this.attachSegsByCol(n,t),e},fgSegHtml:function(e,t){var n=this.view,r=e.event,i=n.isEventDraggable(r),o=!t&&e.isStart&&n.isEventResizableFromStart(r),a=!t&&e.isEnd&&n.isEventResizableFromEnd(r),l=this.getSegClasses(e,i,o||a),s=J(this.getSegSkinCss(e)),d,c,u;return l.unshift('fc-time-grid-event','fc-v-event'),n.isMultiDayEvent(r)?(e.isStart||e.isEnd)&&(d=this.getEventTimeText(e),c=this.getEventTimeText(e,'LT'),u=this.getEventTimeText(e,null,!1)):(d=this.getEventTimeText(r),c=this.getEventTimeText(r,'LT'),u=this.getEventTimeText(r,null,!1)),'<a class="'+l.join(' ')+'"'+(r.url?' href="'+Q(r.url)+'"':'')+(s?' style="'+s+'"':'')+'><div class="fc-content">'+(d?'<div class="fc-time" data-start="'+Q(u)+'" data-full="'+Q(c)+'"><span>'+Q(d)+'</span></div>':'')+(r.title?'<div class="fc-title">'+Q(r.title)+'</div>':'')+'</div><div class="fc-bg"/>'+(a?'<div class="fc-resizer fc-end-resizer" />':'')+'</a>'},updateSegVerticals:function(e){this.computeSegVerticals(e),this.assignSegVerticals(e)},computeSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.top=this.computeDateTop(n.start,n.start),n.bottom=this.computeDateTop(n.end,n.start)},assignSegVerticals:function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.el.css(this.generateSegVerticalCss(n))},generateSegVerticalCss:function(e){return{top:e.top,bottom:-e.bottom}},updateFgSegCoords:function(e){this.computeSegVerticals(e),this.computeFgSegHorizontals(e),this.assignSegVerticals(e),this.assignFgSegHorizontals(e)},computeFgSegHorizontals:function(e){var t,n,r;if(this.sortEventSegs(e),t=Le(e),ze(t),n=t[0]){for(r=0;r<n.length;r++)Be(n[r]);for(r=0;r<n.length;r++)this.computeFgSegForwardBack(n[r],0,0)}},computeFgSegForwardBack:function(e,t,n){var r=e.forwardSegs,o;if(void 0===e.forwardCoord)for(r.length?(this.sortForwardSegs(r),this.computeFgSegForwardBack(r[0],t+1,n),e.forwardCoord=r[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(t+1),o=0;o<r.length;o++)this.computeFgSegForwardBack(r[o],0,e.forwardCoord)},sortForwardSegs:function(e){e.sort(ie(this,'compareForwardSegs'))},compareForwardSegs:function(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||this.compareEventSegs(e,t)},assignFgSegHorizontals:function(e){var t,n;for(t=0;t<e.length;t++)n=e[t],n.el.css(this.generateFgSegHorizontalCss(n)),30>n.bottom-n.top&&n.el.addClass('fc-short')},generateFgSegHorizontalCss:function(e){var t=this.view.opt('slotEventOverlap'),n=e.backwardCoord,r=e.forwardCoord,i=this.generateSegVerticalCss(e),o,a;return t&&(r=We(1,n+2*(r-n))),this.isRTL?(o=1-r,a=n):(o=n,a=1-r),i.zIndex=e.level+1,i.left=100*o+'%',i.right=100*a+'%',t&&e.forwardPressure&&(i[this.isRTL?'marginLeft':'marginRight']=20),i}});var Et=qe.View=ve.extend(dt,ct,{type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,selectedEvent:null,eventOrderSpecs:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(e,t,n,i){this.calendar=e,this.type=this.name=t,this.options=n,this.intervalDuration=i||r.duration(1,'day'),this.nextDayThreshold=r.duration(this.opt('nextDayThreshold')),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt('isRTL'),this.eventOrderSpecs=k(this.opt('eventOrder')),this.initialize()},initialize:function(){},opt:function(e){return this.options[e]},trigger:function(e,t){var n=this.calendar;return n.trigger.apply(n,[e,t||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(e){this.setRange(this.computeRange(e))},setRange:function(t){e.extend(this,t),this.updateTitle()},computeRange:function(e){var t=O(this.intervalDuration),n=e.clone().startOf(t),r=n.clone().add(this.intervalDuration),i,o;return /year|month|week|day/.test(t)?(n.stripTime(),r.stripTime()):(!n.hasTime()&&(n=this.calendar.time(0)),!r.hasTime()&&(r=this.calendar.time(0))),i=n.clone(),i=this.skipHiddenDays(i),o=r.clone(),o=this.skipHiddenDays(o,-1,!0),{intervalUnit:t,intervalStart:n,intervalEnd:r,start:i,end:o}},computePrevDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(e){return this.massageCurrentDate(e.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(e,t){return 1>=this.intervalDuration.as('days')&&this.isHiddenDay(e)&&(e=this.skipHiddenDays(e,t),e.startOf('day')),e},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt('titleFormat')||this.computeTitleFormat(),this.opt('titleRangeSeparator'))},computeTitleFormat:function(){return'year'==this.intervalUnit?'YYYY':'month'==this.intervalUnit?this.opt('monthYearFormat'):1<this.intervalDuration.as('days')?'ll':'LL'},formatRange:function(e,t,n){var r=e.end;return r.hasTime()||(r=r.clone().subtract(1)),ge(e.start,r,t,n,this.opt('isRTL'))},getAllDayHtml:function(){return this.opt('allDayHtml')||Q(this.opt('allDayText'))},buildGotoAnchorHtml:function(t,n,r){var i,o,a,l;return e.isPlainObject(t)?(i=t.date,o=t.type,a=t.forceOff):i=t,i=qe.moment(i),l={date:i.format('YYYY-MM-DD'),type:o||'day'},'string'===typeof n&&(r=n,n=null),n=n?' '+ee(n):'',r=r||'',!a&&this.opt('navLinks')?'<a'+n+' data-goto="'+Q(JSON.stringify(l))+'">'+r+'</a>':'<span'+n+'>'+r+'</span>'},setElement:function(e){this.el=e,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(e,t){var n=this,r=null;return null!=t&&this.displaying&&(r=this.queryScroll()),this.calendar.freezeContentHeight(),ae(this.clear(),function(){return n.displaying=ae(n.displayView(e),function(){null==t?n.forceScroll(n.computeInitialScroll(r)):n.setScroll(t),n.calendar.unfreezeContentHeight(),n.triggerRender()})})},clear:function(){var t=this,n=this.displaying;return n?ae(n,function(){return t.displaying=null,t.clearEvents(),t.clearView()}):e.when()},displayView:function(e){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),e&&this.setDate(e),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger('viewRender',this,this,this.el)},triggerUnrender:function(){this.trigger('viewDestroy',this,this,this.el)},bindGlobalHandlers:function(){this.listenTo(e(document),'mousedown',this.handleDocumentMousedown),this.listenTo(e(document),'touchstart',this.processUnselect)},unbindGlobalHandlers:function(){this.stopListeningTo(e(document))},initThemingProps:function(){var e=this.opt('theme')?'ui':'fc';this.widgetHeaderClass=e+'-widget-header',this.widgetContentClass=e+'-widget-content',this.highlightStateClass=e+'-state-highlight'},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var e=this,t,n,i;this.opt('nowIndicator')&&(t=this.getNowIndicatorUnit(),t&&(n=ie(this,'updateNowIndicator'),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,i=this.initialNowDate.clone().startOf(t).add(1,t)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){e.nowIndicatorTimeoutID=null,n(),i=+r.duration(1,t),i=je(100,i),e.nowIndicatorIntervalID=setInterval(n,i)},i)))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},updateSize:function(e){var t;e&&(t=this.queryScroll()),this.updateHeight(e),this.updateWidth(e),this.updateNowIndicator(),e&&this.setScroll(t)},updateWidth:function(){},updateHeight:function(){var e=this.calendar;this.setHeight(e.getSuggestedViewHeight(),e.isHeightAuto())},setHeight:function(){},computeInitialScroll:function(){return 0},queryScroll:function(){},setScroll:function(){},forceScroll:function(e){var t=this;this.setScroll(e),setTimeout(function(){t.setScroll(e)},0)},displayEvents:function(e){var t=this.queryScroll();this.clearEvents(),this.renderEvents(e),this.isEventsRendered=!0,this.setScroll(t),this.triggerEventRender()},clearEvents:function(){var e;this.isEventsRendered&&(e=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(e),this.isEventsRendered=!1)},renderEvents:function(){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(e){this.trigger('eventAfterRender',e.event,e.event,e.el)}),this.trigger('eventAfterAllRender')},triggerEventUnrender:function(){this.renderedEventSegEach(function(e){this.trigger('eventDestroy',e.event,e.event,e.el)})},resolveEventEl:function(t,n){var r=this.trigger('eventRender',t,t,n);return!1===r?n=null:r&&!0!==r&&(n=e(r)),n},showEvent:function(e){this.renderedEventSegEach(function(e){e.el.css('visibility','')},e)},hideEvent:function(e){this.renderedEventSegEach(function(e){e.el.css('visibility','hidden')},e)},renderedEventSegEach:function(e,t){var n=this.getEventSegs(),r;for(r=0;r<n.length;r++)(!t||n[r].event._id===t._id)&&n[r].el&&e.call(this,n[r])},getEventSegs:function(){return[]},isEventDraggable:function(e){return this.isEventStartEditable(e)},isEventStartEditable:function(e){return K(e.startEditable,(e.source||{}).startEditable,this.opt('eventStartEditable'),this.isEventGenerallyEditable(e))},isEventGenerallyEditable:function(e){return K(e.editable,(e.source||{}).editable,this.opt('editable'))},reportEventDrop:function(e,t,n,r,i){var o=this.calendar,a=o.mutateEvent(e,t,n);this.triggerEventDrop(e,a.dateDelta,function(){a.undo(),o.reportEventChange()},r,i),o.reportEventChange()},triggerEventDrop:function(e,t,n,r,i){this.trigger('eventDrop',r[0],e,t,n,i,{})},reportExternalDrop:function(t,n,r,i,o){var a=t.eventProps,l,s;a&&(l=e.extend({},a,n),s=this.calendar.renderEvent(l,t.stick)[0]),this.triggerExternalDrop(s,n,r,i,o)},triggerExternalDrop:function(e,t,n,r,i){this.trigger('drop',n[0],t.start,r,i),e&&this.trigger('eventReceive',null,e)},renderDrag:function(){},unrenderDrag:function(){},isEventResizableFromStart:function(e){return this.opt('eventResizableFromStart')&&this.isEventResizable(e)},isEventResizableFromEnd:function(e){return this.isEventResizable(e)},isEventResizable:function(e){var t=e.source||{};return K(e.durationEditable,t.durationEditable,this.opt('eventDurationEditable'),e.editable,t.editable,this.opt('editable'))},reportEventResize:function(e,t,n,r,i){var o=this.calendar,a=o.mutateEvent(e,t,n);this.triggerEventResize(e,a.durationDelta,function(){a.undo(),o.reportEventChange()},r,i),o.reportEventChange()},triggerEventResize:function(e,t,n,r,i){this.trigger('eventResize',r[0],e,t,n,i,{})},select:function(e,t){this.unselect(t),this.renderSelection(e),this.reportSelection(e,t)},renderSelection:function(){},reportSelection:function(e,t){this.isSelected=!0,this.triggerSelect(e,t)},triggerSelect:function(e,t){this.trigger('select',null,this.calendar.applyTimezone(e.start),this.calendar.applyTimezone(e.end),t)},unselect:function(e){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger('unselect',null,e))},unrenderSelection:function(){},selectEvent:function(e){this.selectedEvent&&this.selectedEvent===e||(this.unselectEvent(),this.renderedEventSegEach(function(e){e.el.addClass('fc-selected')},e),this.selectedEvent=e)},unselectEvent:function(){this.selectedEvent&&(this.renderedEventSegEach(function(e){e.el.removeClass('fc-selected')},this.selectedEvent),this.selectedEvent=null)},isEventSelected:function(e){return this.selectedEvent&&this.selectedEvent._id===e._id},handleDocumentMousedown:function(e){y(e)&&this.processUnselect(e)},processUnselect:function(e){this.processRangeUnselect(e),this.processEventUnselect(e)},processRangeUnselect:function(t){var n;this.isSelected&&this.opt('unselectAuto')&&(n=this.opt('unselectCancel'),(!n||!e(t.target).closest(n).length)&&this.unselect(t))},processEventUnselect:function(t){this.selectedEvent&&!e(t.target).closest('.fc-selected').length&&this.unselectEvent()},triggerDayClick:function(e,t,n){this.trigger('dayClick',t,this.calendar.applyTimezone(e.start),n)},initHiddenDays:function(){var t=this.opt('hiddenDays')||[],n=[],r=0,o;for(!1===this.opt('weekends')&&t.push(0,6),o=0;7>o;o++)(n[o]=-1!==e.inArray(o,t))||r++;if(!r)throw'invalid hiddenDays';this.isHiddenDayHash=n},isHiddenDay:function(e){return r.isMoment(e)&&(e=e.day()),this.isHiddenDayHash[e]},skipHiddenDays:function(e,t,n){var r=e.clone();for(t=t||1;this.isHiddenDayHash[(r.day()+(n?t:0)+7)%7];)r.add(t,'days');return r},computeDayRange:function(e){var t=e.start.clone().stripTime(),n=e.end,r=null,i;return n&&(r=n.clone().stripTime(),i=+n.time(),i&&i>=this.nextDayThreshold&&r.add(1,'days')),(!n||r<=t)&&(r=t.clone().add(1,'days')),{start:t,end:r}},isMultiDayEvent:function(e){var t=this.computeDayRange(e);return 1<t.end.diff(t.start,'days')}}),bt=qe.Scroller=ve.extend({el:null,scrollEl:null,overflowX:null,overflowY:null,constructor:function(e){e=e||{},this.overflowX=e.overflowX||e.overflow||'auto',this.overflowY=e.overflowY||e.overflow||'auto'},render:function(){this.el=this.renderEl(),this.applyOverflow()},renderEl:function(){return this.scrollEl=e('<div class="fc-scroller"></div>')},clear:function(){this.setHeight('auto'),this.applyOverflow()},destroy:function(){this.el.remove()},applyOverflow:function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},lockOverflow:function(e){var t=this.overflowX,n=this.overflowY;e=e||this.getScrollbarWidths(),'auto'===t&&(t=e.top||e.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?'scroll':'hidden'),'auto'===n&&(n=e.left||e.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?'scroll':'hidden'),this.scrollEl.css({"overflow-x":t,"overflow-y":n})},setHeight:function(e){this.scrollEl.height(e)},getScrollTop:function(){return this.scrollEl.scrollTop()},setScrollTop:function(e){this.scrollEl.scrollTop(e)},getClientWidth:function(){return this.scrollEl[0].clientWidth},getClientHeight:function(){return this.scrollEl[0].clientHeight},getScrollbarWidths:function(){return m(this.scrollEl)}}),Dt=qe.Calendar=ve.extend({dirDefaults:null,localeDefaults:null,overrides:null,dynamicOverrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:function(n,i){function o(e){e._locale=t}function a(){n.addClass('fc'),n.on('click.fc','a[data-goto]',function(t){var n=e(this),r=n.data('goto'),i=I.moment(r.date),o=r.type,a=O.opt('navLink'+te(o)+'Click');'function'===typeof a?a(i,t):('string'===typeof a&&(o=a),D(i,o))}),I.bindOption('theme',function(e){M=e?'ui':'fc',n.toggleClass('ui-widget',e),n.toggleClass('fc-unthemed',!e)}),I.bindOptions(['isRTL','locale'],function(e){n.toggleClass('fc-ltr',!e),n.toggleClass('fc-rtl',e)}),G=e('<div class=\'fc-view-container\'/>').prependTo(n),N=I.header=new Oe(I),l(),d(I.options.defaultView),I.options.handleWindowResize&&(V=oe(h,I.options.windowResizeDelay),e(window).resize(V))}function l(){N.render(),N.el&&n.prepend(N.el)}function s(){return n.is(':visible')}function d(t,n){B++,O&&t&&O.type!==t&&(C(),c()),!O&&t&&(O=I.view=z[t]||(z[t]=I.instantiateView(t)),O.setElement(e('<div class=\'fc-view fc-'+t+'-view\' />').appendTo(G)),N.activateButton(t)),O&&(P=O.massageCurrentDate(P),(!O.displaying||!(P>=O.intervalStart&&P<O.intervalEnd))&&s()&&(O.display(P,n),H(),E(),b(),S())),H(),B--}function c(){N.deactivateButton(O.type),O.removeElement(),O=I.view=null}function u(){B++,C();var e=O.type,t=O.queryScroll();c(),d(e,t),H(),B--}function g(e){if(s())return e&&m(),B++,O.updateSize(!0),B--,!0}function p(){s()&&m()}function m(){var e=I.options.contentHeight,t=I.options.height;A='number'===typeof e?e:'function'===typeof e?e():'number'===typeof t?t-f():'function'===typeof t?t()-f():'parent'===t?n.parent().height()-f():Ye(G.width()/je(I.options.aspectRatio,.5))}function f(){return N.el?N.el.outerHeight(!0):0}function h(e){!B&&e.target===window&&O.start&&g(!0)&&O.trigger('windowResize',L)}function v(){w()}function y(){s()&&(C(),O.displayEvents(F),H())}function S(){!I.options.lazyFetching||x(O.start,O.end)?w():y()}function w(){R(O.start,O.end)}function E(){N.updateTitle(O.title)}function b(){var e=I.getNow();e>=O.intervalStart&&e<O.intervalEnd?N.disableButton('today'):N.enableButton('today')}function D(e,t){var n;t=t||'day',n=I.getViewSpec(t)||I.getUnitViewSpec(t),P=e.clone(),d(n?n.type:null)}function C(){G.css({width:'100%',height:G.height(),overflow:'hidden'})}function H(){G.css({width:'',height:'',overflow:''})}function T(e){var t=0,n;for(n in e)I.dynamicOverrides[n]=e[n];for(n in I.viewSpecCache={},I.populateOptionsHash(),e)I.triggerOptionHandlers(n),t++;if(1===t){if('height'===n||'contentHeight'===n||'aspectRatio'===n)return void g(!0);if('defaultDate'===n)return;if('businessHours'===n)return void(O&&(O.unrenderBusinessHours(),O.renderBusinessHours()));if('timezone'===n)return I.rezoneArrayEventSources(),void v()}l(),z={},u()}var I=this;I.render=function(){G?s()&&(p(),d()):a()},I.destroy=function(){O&&O.removeElement(),N.removeElement(),G.remove(),n.removeClass('fc fc-ltr fc-rtl fc-unthemed ui-widget'),n.off('.fc'),V&&e(window).unbind('resize',V)},I.refetchEvents=v,I.refetchEventSources=function(e){k(I.getEventSourcesByMatchArray(e))},I.reportEvents=function(e){F=e,y()},I.reportEventChange=function(){y()},I.rerenderEvents=y,I.changeView=d,I.select=function(){O.select(I.buildSelectSpan.apply(I,arguments))},I.unselect=function(){O&&O.unselect()},I.prev=function(){P=O.computePrevDate(P),d()},I.next=function(){P=O.computeNextDate(P),d()},I.prevYear=function(){P.add(-1,'years'),d()},I.nextYear=function(){P.add(1,'years'),d()},I.today=function(){P=I.getNow(),d()},I.gotoDate=function(e){P=I.moment(e).stripZone(),d()},I.incrementDate=function(e){P.add(r.duration(e)),d()},I.zoomTo=D,I.getDate=function(){return I.applyTimezone(P)},I.getCalendar=function(){return I},I.getView=function(){return O},I.option=function(e,t){var n;if('string'===typeof e){if(void 0===t)return I.options[e];n={},n[e]=t,T(n)}else'object'===('undefined'===typeof e?'undefined':babelHelpers.typeof(e))&&T(e)},I.trigger=function(e,t){var n=Array.prototype.slice.call(arguments,2);if(t=t||L,this.triggerWith(e,t,n),I.options[e])return I.options[e].apply(t,n)},I.dynamicOverrides={},I.viewSpecCache={},I.optionHandlers={},I.overrides=e.extend({},i),I.populateOptionsHash();var t;I.bindOptions(['locale','monthNames','monthNamesShort','dayNames','dayNamesShort','firstDay','weekNumberCalculation'],function(e,n,r,i,a,l,s){if('iso'===s&&(s='ISO'),t=j(Me(e)),n&&(t._months=n),r&&(t._monthsShort=r),i&&(t._weekdays=i),a&&(t._weekdaysShort=a),null==l&&'ISO'===s&&(l=1),null!=l){var d=j(t._week);d.dow=l,t._week=d}('ISO'===s||'local'===s||'function'===typeof s)&&(t._fullCalendar_weekCalc=s),P&&o(P)}),I.defaultAllDayEventDuration=r.duration(I.options.defaultAllDayEventDuration),I.defaultTimedEventDuration=r.duration(I.options.defaultTimedEventDuration),I.moment=function(){var e;return'local'===I.options.timezone?(e=qe.moment.apply(null,arguments),e.hasTime()&&e.local()):'UTC'===I.options.timezone?e=qe.moment.utc.apply(null,arguments):e=qe.moment.parseZone.apply(null,arguments),o(e),e},I.localizeMoment=o,I.getIsAmbigTimezone=function(){return'local'!==I.options.timezone&&'UTC'!==I.options.timezone},I.applyTimezone=function(e){if(!e.hasTime())return e.clone();var t=I.moment(e.toArray()),n=e.time()-t.time(),r;return n&&(r=t.clone().add(n),0===e.time()-r.time()&&(t=r)),t},I.getNow=function(){var e=I.options.now;return'function'===typeof e&&(e=e()),I.moment(e).stripZone()},I.getEventEnd=function(e){return e.end?e.end.clone():I.getDefaultEventEnd(e.allDay,e.start)},I.getDefaultEventEnd=function(e,t){var n=t.clone();return e?n.stripTime().add(I.defaultAllDayEventDuration):n.add(I.defaultTimedEventDuration),I.getIsAmbigTimezone()&&n.stripZone(),n},I.humanizeDuration=function(e){return e.locale(I.options.locale).humanize()},Ae.call(I);var x=I.isFetchNeeded,R=I.fetchEvents,k=I.fetchEventSources,L=n[0],z={},B=0,F=[],N,G,M,O,A,V,P;P=null==I.options.defaultDate?I.getNow():I.moment(I.options.defaultDate).stripZone(),I.getSuggestedViewHeight=function(){return void 0===A&&p(),A},I.isHeightAuto=function(){return'auto'===I.options.contentHeight||'auto'===I.options.height},I.freezeContentHeight=C,I.unfreezeContentHeight=H,I.initialize()},initialize:function(){},populateOptionsHash:function(){var e,n,r,i;e=K(this.dynamicOverrides.locale,this.overrides.locale),n=Ct[e],n||(e=Dt.defaults.locale,n=Ct[e]||{}),r=K(this.dynamicOverrides.isRTL,this.overrides.isRTL,n.isRTL,Dt.defaults.isRTL),i=r?Dt.rtlDefaults:{},this.dirDefaults=i,this.localeDefaults=n,this.options=t([Dt.defaults,i,n,this.overrides,this.dynamicOverrides]),Ge(this.options)},getViewSpec:function(e){var t=this.viewSpecCache;return t[e]||(t[e]=this.buildViewSpec(e))},getUnitViewSpec:function(t){var n,r,i;if(-1!=e.inArray(t,$e))for(n=this.header.getViewsWithButtons(),e.each(qe.views,function(e){n.push(e)}),r=0;r<n.length;r++)if(i=this.getViewSpec(n[r]),i&&i.singleUnit==t)return i},buildViewSpec:function(e){for(var n=this.overrides.views||{},i=[],o=[],a=[],l=e,s,d,c,u;l;)s=Ze[l],d=n[l],l=null,'function'===typeof s&&(s={class:s}),s&&(i.unshift(s),o.unshift(s.defaults||{}),c=c||s.duration,l=l||s.type),d&&(a.unshift(d),c=c||d.duration,l=l||d.type);return(s=W(i),s.type=e,!!s['class'])&&(c&&(c=r.duration(c),c.valueOf()&&(s.duration=c,u=O(c),1===c.as(u)&&(s.singleUnit=u,a.unshift(n[u]||{})))),s.defaults=t(o),s.overrides=t(a),this.buildViewSpecOptions(s),this.buildViewSpecButtonText(s,e),s)},buildViewSpecOptions:function(e){e.options=t([Dt.defaults,e.defaults,this.dirDefaults,this.localeDefaults,this.overrides,e.overrides,this.dynamicOverrides]),Ge(e.options)},buildViewSpecButtonText:function(e,t){function n(n){var r=n.buttonText||{};return r[t]||(e.buttonTextKey?r[e.buttonTextKey]:null)||(e.singleUnit?r[e.singleUnit]:null)}e.buttonTextOverride=n(this.dynamicOverrides)||n(this.overrides)||e.overrides.buttonText,e.buttonTextDefault=n(this.localeDefaults)||n(this.dirDefaults)||e.defaults.buttonText||n(Dt.defaults)||(e.duration?this.humanizeDuration(e.duration):null)||t},instantiateView:function(e){var t=this.getViewSpec(e);return new t['class'](this,e,t.options,t.duration)},isValidViewType:function(e){return!!this.getViewSpec(e)},pushLoading:function(){this.loadingLevel++||this.trigger('loading',null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger('loading',null,!1,this.view)},buildSelectSpan:function(e,t){var n=this.moment(e).stripZone(),r;return r=t?this.moment(t).stripZone():n.hasTime()?n.clone().add(this.defaultTimedEventDuration):n.clone().add(this.defaultAllDayEventDuration),{start:n,end:r}}});Dt.mixin(dt),Dt.mixin({optionHandlers:null,bindOption:function(e,t){this.bindOptions([e],t)},bindOptions:function(e,t){var n={func:t,names:e},r;for(r=0;r<e.length;r++)this.registerOptionHandlerObj(e[r],n);this.triggerOptionHandlerObj(n)},registerOptionHandlerObj:function(e,t){(this.optionHandlers[e]||(this.optionHandlers[e]=[])).push(t)},triggerOptionHandlers:function(e){var t=this.optionHandlers[e]||[],n;for(n=0;n<t.length;n++)this.triggerOptionHandlerObj(t[n])},triggerOptionHandlerObj:function(e){var t=e.names,n=[],r;for(r=0;r<t.length;r++)n.push(this.options[t[r]]);e.func.apply(this,n)}}),Dt.defaults={titleRangeSeparator:' \u2013 ',monthYearFormat:'MMMM YYYY',defaultTimedEventDuration:'02:00:00',defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:'09:00:00',defaultView:'month',aspectRatio:1.35,header:{left:'title',center:'',right:'today prev,next'},weekends:!0,weekNumbers:!1,weekNumberTitle:'W',weekNumberCalculation:'local',scrollTime:'06:00:00',lazyFetching:!0,startParam:'start',endParam:'end',timezoneParam:'timezone',timezone:!1,isRTL:!1,buttonText:{prev:'prev',next:'next',prevYear:'prev year',nextYear:'next year',year:'year',today:'Aujourd\'hui',month:'mois',week:'semaine',day:'jour'},buttonIcons:{prev:'left-single-arrow',next:'right-single-arrow',prevYear:'left-double-arrow',nextYear:'right-double-arrow'},allDayText:'all-day',theme:!1,themeButtonIcons:{prev:'circle-triangle-w',next:'circle-triangle-e',prevYear:'seek-prev',nextYear:'seek-next'},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:'*',eventOrder:'title',eventLimit:!1,eventLimitText:'more',eventLimitClick:'popover',dayPopoverFormat:'LL',handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3},Dt.englishDefaults={dayPopoverFormat:'dddd, MMMM D'},Dt.rtlDefaults={header:{left:'next,prev today',center:'',right:'title'},buttonIcons:{prev:'right-single-arrow',next:'left-single-arrow',prevYear:'right-double-arrow',nextYear:'left-double-arrow'},themeButtonIcons:{prev:'circle-triangle-e',next:'circle-triangle-w',nextYear:'seek-prev',prevYear:'seek-next'}};var Ct=qe.locales={};qe.datepickerLocale=function(t,n,r){var i=Ct[t]||(Ct[t]={});i.isRTL=r.isRTL,i.weekNumberTitle=r.weekHeader,e.each(Ht,function(e,t){i[e]=t(r)}),e.datepicker&&(e.datepicker.regional[n]=e.datepicker.regional[t]=r,e.datepicker.regional.en=e.datepicker.regional[''],e.datepicker.setDefaults(r))},qe.locale=function(n,r){var i,o;i=Ct[n]||(Ct[n]={}),r&&(i=Ct[n]=t([i,r])),o=Me(n),e.each(Tt,function(e,t){null==i[e]&&(i[e]=t(o,i))}),Dt.defaults.locale=n};var Ht={buttonText:function(e){return{prev:$(e.prevText),next:$(e.nextText),today:$(e.currentText)}},monthYearFormat:function(e){return e.showMonthAfterYear?'YYYY['+e.yearSuffix+'] MMMM':'MMMM YYYY['+e.yearSuffix+']'}},Tt={dayOfMonthFormat:function(e,t){var n=e.longDateFormat('l');return n=n.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,''),t.isRTL?n+=' ddd':n='ddd '+n,n},mediumTimeFormat:function(e){return e.longDateFormat('LT').replace(/\s*a$/i,'a')},smallTimeFormat:function(e){return e.longDateFormat('LT').replace(':mm','(:mm)').replace(/(\Wmm)$/,'($1)').replace(/\s*a$/i,'a')},extraSmallTimeFormat:function(e){return e.longDateFormat('LT').replace(':mm','(:mm)').replace(/(\Wmm)$/,'($1)').replace(/\s*a$/i,'t')},hourFormat:function(e){return e.longDateFormat('LT').replace(':mm','').replace(/(\Wmm)$/,'').replace(/\s*a$/i,'a')},noMeridiemTimeFormat:function(e){return e.longDateFormat('LT').replace(/\s*a$/i,'')}},It={smallDayDateFormat:function(e){return e.isRTL?'D dd':'dd D'},weekFormat:function(e){return e.isRTL?'w[ '+e.weekNumberTitle+']':'['+e.weekNumberTitle+' ]w'},smallWeekFormat:function(e){return e.isRTL?'w['+e.weekNumberTitle+']':'['+e.weekNumberTitle+']w'}};qe.locale('en',Dt.englishDefaults),qe.sourceNormalizers=[],qe.sourceFetchers=[];var xt={dataType:'json',cache:!1},Rt=1;Dt.prototype.normalizeEvent=function(){},Dt.prototype.spanContainsSpan=function(e,t){var n=e.start.clone().stripZone(),r=this.getEventEnd(e).stripZone();return t.start>=n&&t.end<=r},Dt.prototype.getPeerEvents=function(e,t){var n=this.getEventCache(),r=[],o,i;for(o=0;o<n.length;o++)i=n[o],t&&t._id===i._id||r.push(i);return r},Dt.prototype.isEventSpanAllowed=function(e,t){var n=t.source||{},r=K(t.constraint,n.constraint,this.options.eventConstraint),i=K(t.overlap,n.overlap,this.options.eventOverlap);return this.isSpanAllowed(e,r,i,t)&&(!this.options.eventAllow||!1!==this.options.eventAllow(e,t))},Dt.prototype.isExternalSpanAllowed=function(t,n,r){var i,o;return r&&(i=e.extend({},r,n),o=this.expandEvent(this.buildEventFromInput(i))[0]),o?this.isEventSpanAllowed(t,o):this.isSelectionSpanAllowed(t)},Dt.prototype.isSelectionSpanAllowed=function(e){return this.isSpanAllowed(e,this.options.selectConstraint,this.options.selectOverlap)&&(!this.options.selectAllow||!1!==this.options.selectAllow(e))},Dt.prototype.isSpanAllowed=function(e,t,n,r){var o,a,l,s,i,d;if(null!=t&&(o=this.constraintToEvents(t),o)){for(a=!1,s=0;s<o.length;s++)if(this.spanContainsSpan(o[s],e)){a=!0;break}if(!a)return!1}for(l=this.getPeerEvents(e,r),s=0;s<l.length;s++)if(i=l[s],this.eventIntersectsRange(i,e)){if(!1===n)return!1;if('function'===typeof n&&!n(i,r))return!1;if(r){if(d=K(i.overlap,(i.source||{}).overlap),!1===d)return!1;if('function'===typeof d&&!d(r,i))return!1}}return!0},Dt.prototype.constraintToEvents=function(e){return'businessHours'===e?this.getCurrentBusinessHourEvents():'object'===('undefined'===typeof e?'undefined':babelHelpers.typeof(e))?null==e.start?null:this.expandEvent(this.buildEventFromInput(e)):this.clientEvents(e)},Dt.prototype.eventIntersectsRange=function(e,t){var n=e.start.clone().stripZone(),r=this.getEventEnd(e).stripZone();return t.start<r&&t.end>n};var kt={id:'_fcBusinessHours',start:'09:00',end:'17:00',dow:[1,2,3,4,5],rendering:'inverse-background'};Dt.prototype.getCurrentBusinessHourEvents=function(e){return this.computeBusinessHourEvents(e,this.options.businessHours)},Dt.prototype.computeBusinessHourEvents=function(t,n){return!0===n?this.expandBusinessHourEvents(t,[{}]):e.isPlainObject(n)?this.expandBusinessHourEvents(t,[n]):e.isArray(n)?this.expandBusinessHourEvents(t,n,!0):[]},Dt.prototype.expandBusinessHourEvents=function(t,n,r){var o=this.getView(),a=[],l,i;for(l=0;l<n.length;l++)(i=n[l],!r||i.dow)&&(i=e.extend({},kt,i),t&&(i.start=null,i.end=null),a.push.apply(a,this.expandEvent(this.buildEventFromInput(i),o.start,o.end)));return a};var Lt=qe.BasicView=Et.extend({scroller:null,dayGridClass:St,dayGrid:null,dayNumbersVisible:!1,colWeekNumbersVisible:!1,cellWeekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid(),this.scroller=new bt({overflowX:'hidden',overflowY:'auto'})},instantiateDayGrid:function(){var e=this.dayGridClass.extend(zt);return new e(this)},setRange:function(e){Et.prototype.setRange.call(this,e),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(e)},computeRange:function(e){var t=Et.prototype.computeRange.call(this,e);return /year|month/.test(t.intervalUnit)&&(t.start.startOf('week'),t.start=this.skipHiddenDays(t.start),t.end.weekday()&&(t.end.add(1,'week').startOf('week'),t.end=this.skipHiddenDays(t.end,-1,!0))),t},renderDates:function(){this.dayNumbersVisible=1<this.dayGrid.rowCnt,this.opt('weekNumbers')&&(this.opt('weekNumbersWithinDays')?(this.cellWeekNumbersVisible=!0,this.colWeekNumbersVisible=!1):(this.cellWeekNumbersVisible=!1,this.colWeekNumbersVisible=!0)),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.cellWeekNumbersVisible||this.colWeekNumbersVisible,this.el.addClass('fc-basic-view').html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass('fc-day-grid-container'),n=e('<div class="fc-day-grid" />').appendTo(t);this.el.find('.fc-body > tr > td').append(t),this.dayGrid.setElement(n),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find('.fc-head-container').html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find('.fc-row')},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement(),this.scroller.destroy()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.dayGrid.unrenderBusinessHours()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null===this.weekNumberWidth?'':'style="width:'+this.weekNumberWidth+'px"'},hasRigidRows:function(){var e=this.opt('eventLimit');return e&&'number'!==typeof e},updateWidth:function(){this.colWeekNumbersVisible&&(this.weekNumberWidth=d(this.el.find('.fc-week-number')))},setHeight:function(e,t){var r=this.opt('eventLimit'),o,a;this.scroller.clear(),i(this.headRowEl),this.dayGrid.removeSegPopover(),r&&'number'===typeof r&&this.dayGrid.limitRows(r),o=this.computeScrollerHeight(e),this.setGridHeight(o,t),r&&'number'!==typeof r&&this.dayGrid.limitRows(r),t||(this.scroller.setHeight(o),a=this.scroller.getScrollbarWidths(),(a.left||a.right)&&(n(this.headRowEl,a),o=this.computeScrollerHeight(e),this.scroller.setHeight(o)),this.scroller.lockOverflow(a))},computeScrollerHeight:function(e){return e-c(this.el,this.scroller.el)},setGridHeight:function(e,t){t?s(this.dayGrid.rowEls):l(this.dayGrid.rowEls,e,!0)},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(e){this.scroller.setScrollTop(e)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(e,t){return this.dayGrid.queryHit(e,t)},getHitSpan:function(e){return this.dayGrid.getHitSpan(e)},getHitEl:function(e){return this.dayGrid.getHitEl(e)},renderEvents:function(e){this.dayGrid.renderEvents(e),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return this.dayGrid.renderDrag(e,t)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(e){this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),zt={renderHeadIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<th class="fc-week-number '+e.widgetHeaderClass+'" '+e.weekNumberStyleAttr()+'><span>'+Q(e.opt('weekNumberTitle'))+'</span></th>':''},renderNumberIntroHtml:function(e){var t=this.view,n=this.getCellDate(e,0);return t.colWeekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+'>'+t.buildGotoAnchorHtml({date:n,type:'week',forceOff:1===this.colCnt},n.format('w'))+'</td>':''},renderBgIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number '+e.widgetContentClass+'" '+e.weekNumberStyleAttr()+'></td>':''},renderIntroHtml:function(){var e=this.view;return e.colWeekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+'></td>':''}},Bt=qe.MonthView=Lt.extend({computeRange:function(e){var t=Lt.prototype.computeRange.call(this,e),n;return this.isFixedWeeks()&&(n=Pe(t.end.diff(t.start,'weeks',!0)),t.end.add(6-n,'weeks')),t},setGridHeight:function(e,t){t&&(e*=this.rowCnt/6),l(this.dayGrid.rowEls,e,!t)},isFixedWeeks:function(){return this.opt('fixedWeekCount')}});Ze.basic={class:Lt},Ze.basicDay={type:'basic',duration:{days:1}},Ze.basicWeek={type:'basic',duration:{weeks:1}},Ze.month={class:Bt,duration:{months:1},defaults:{fixedWeekCount:!0}};var Ft=qe.AgendaView=Et.extend({scroller:null,timeGridClass:wt,timeGrid:null,dayGridClass:St,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt('allDaySlot')&&(this.dayGrid=this.instantiateDayGrid()),this.scroller=new bt({overflowX:'hidden',overflowY:'auto'})},instantiateTimeGrid:function(){var e=this.timeGridClass.extend(Nt);return new e(this)},instantiateDayGrid:function(){var e=this.dayGridClass.extend(Gt);return new e(this)},setRange:function(e){Et.prototype.setRange.call(this,e),this.timeGrid.setRange(e),this.dayGrid&&this.dayGrid.setRange(e)},renderDates:function(){this.el.addClass('fc-agenda-view').html(this.renderSkeletonHtml()),this.renderHead(),this.scroller.render();var t=this.scroller.el.addClass('fc-time-grid-container'),n=e('<div class="fc-time-grid" />').appendTo(t);this.el.find('.fc-body > tr > td').append(t),this.timeGrid.setElement(n),this.timeGrid.renderDates(),this.bottomRuleEl=e('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find('.fc-day-grid')),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next('hr').outerHeight()),this.noScrollRowEls=this.el.find('.fc-row:not(.fc-scroller *)')},renderHead:function(){this.headContainerEl=this.el.find('.fc-head-container').html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement()),this.scroller.destroy()},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':'')+'</td></tr></tbody></table>'},axisStyleAttr:function(){return null===this.axisWidth?'':'style="width:'+this.axisWidth+'px"'},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(e){this.timeGrid.renderNowIndicator(e)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(e){this.timeGrid.updateSize(e),Et.prototype.updateSize.call(this,e)},updateWidth:function(){this.axisWidth=d(this.el.find('.fc-axis'))},setHeight:function(e,t){var r,o,a;this.bottomRuleEl.hide(),this.scroller.clear(),i(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),r=this.opt('eventLimit'),r&&'number'!==typeof r&&(r=5),r&&this.dayGrid.limitRows(r)),t||(o=this.computeScrollerHeight(e),this.scroller.setHeight(o),a=this.scroller.getScrollbarWidths(),(a.left||a.right)&&(n(this.noScrollRowEls,a),o=this.computeScrollerHeight(e),this.scroller.setHeight(o)),this.scroller.lockOverflow(a),this.timeGrid.getTotalSlatHeight()<o&&this.bottomRuleEl.show())},computeScrollerHeight:function(e){return e-c(this.el,this.scroller.el)},computeInitialScroll:function(){var e=r.duration(this.opt('scrollTime')),t=this.timeGrid.computeTimeTop(e);return t=Pe(t),t&&t++,t},queryScroll:function(){return this.scroller.getScrollTop()},setScroll:function(e){this.scroller.setScrollTop(e)},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(e,t){var n=this.timeGrid.queryHit(e,t);return!n&&this.dayGrid&&(n=this.dayGrid.queryHit(e,t)),n},getHitSpan:function(e){return e.component.getHitSpan(e)},getHitEl:function(e){return e.component.getHitEl(e)},renderEvents:function(e){var t=[],n=[],r=[],o,a;for(a=0;a<e.length;a++)e[a].allDay?t.push(e[a]):n.push(e[a]);o=this.timeGrid.renderEvents(n),this.dayGrid&&(r=this.dayGrid.renderEvents(t)),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(e,t){return e.start.hasTime()?this.timeGrid.renderDrag(e,t):this.dayGrid?this.dayGrid.renderDrag(e,t):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(e){e.start.hasTime()||e.end.hasTime()?this.timeGrid.renderSelection(e):this.dayGrid&&this.dayGrid.renderSelection(e)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Nt={renderHeadIntroHtml:function(){var e=this.view,t;return e.opt('weekNumbers')?(t=this.start.format(e.opt('smallWeekFormat')),'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+'>'+e.buildGotoAnchorHtml({date:this.start,type:'week',forceOff:1<this.colCnt},Q(t))+'</th>'):'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+'></th>'},renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+'></td>'},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+'></td>'}},Gt={renderBgIntroHtml:function(){var e=this.view;return'<td class="fc-axis '+e.widgetContentClass+'" '+e.axisStyleAttr()+'><span>'+e.getAllDayHtml()+'</span></td>'},renderIntroHtml:function(){var e=this.view;return'<td class="fc-axis" '+e.axisStyleAttr()+'></td>'}},Mt=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];Ze.agenda={class:Ft,defaults:{allDaySlot:!0,slotDuration:'00:30:00',minTime:'00:00:00',maxTime:'24:00:00',slotEventOverlap:!0}},Ze.agendaDay={type:'agenda',duration:{days:1}},Ze.agendaWeek={type:'agenda',duration:{weeks:1}};var Ot=Et.extend({grid:null,scroller:null,initialize:function(){this.grid=new At(this),this.scroller=new bt({overflowX:'hidden',overflowY:'auto'})},setRange:function(e){Et.prototype.setRange.call(this,e),this.grid.setRange(e)},renderSkeleton:function(){this.el.addClass('fc-list-view '+this.widgetContentClass),this.scroller.render(),this.scroller.el.appendTo(this.el),this.grid.setElement(this.scroller.scrollEl)},unrenderSkeleton:function(){this.scroller.destroy()},setHeight:function(e){this.scroller.setHeight(this.computeScrollerHeight(e))},computeScrollerHeight:function(e){return e-c(this.el,this.scroller.el)},renderEvents:function(e){this.grid.renderEvents(e)},unrenderEvents:function(){this.grid.unrenderEvents()},isEventResizable:function(){return!1},isEventDraggable:function(){return!1}}),At=vt.extend({segSelector:'.fc-list-item',hasDayInteractions:!1,spanToSegs:function(e){for(var t=this.view,n=t.start.clone().time(0),r=0,i=[],o;n<t.end;)if(o=F(e,{start:n,end:n.clone().add(1,'day')}),o&&(o.dayIndex=r,i.push(o)),n.add(1,'day'),r++,o&&!o.isEnd&&e.end.hasTime()&&e.end<n.clone().add(this.view.nextDayThreshold)){o.end=e.end.clone(),o.isEnd=!0;break}return i},computeEventTimeFormat:function(){return this.view.opt('mediumTimeFormat')},handleSegClick:function(t,n){var r;vt.prototype.handleSegClick.apply(this,arguments),e(n.target).closest('a[href]').length||(r=t.event.url,r&&!n.isDefaultPrevented()&&(window.location.href=r))},renderFgSegs:function(e){return e=this.renderFgSegEls(e),e.length?this.renderSegList(e):this.renderEmptyMessage(),e},renderEmptyMessage:function(){this.el.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+Q(this.view.opt('noEventsMessage'))+'</div></div></div>')},renderSegList:function(t){var n=this.groupSegsByDay(t),r=e('<table class="fc-list-table"><tbody/></table>'),o=r.find('tbody'),a,l,s;for(a=0;a<n.length;a++)if(l=n[a],l)for(o.append(this.dayHeaderHtml(this.view.start.clone().add(a,'days'))),this.sortEventSegs(l),s=0;s<l.length;s++)o.append(l[s].el);this.el.empty().append(r)},groupSegsByDay:function(e){var t=[],n,r;for(n=0;n<e.length;n++)r=e[n],(t[r.dayIndex]||(t[r.dayIndex]=[])).push(r);return t},dayHeaderHtml:function(e){var t=this.view,n=t.opt('listDayFormat'),r=t.opt('listDayAltFormat');return'<tr class="fc-list-heading" data-date="'+e.format('YYYY-MM-DD')+'"><td class="'+t.widgetHeaderClass+'" colspan="3">'+(n?t.buildGotoAnchorHtml(e,{class:'fc-list-heading-main'},Q(e.format(n))):'')+(r?t.buildGotoAnchorHtml(e,{class:'fc-list-heading-alt'},Q(e.format(r))):'')+'</td></tr>'},fgSegHtml:function(e){var t=this.view,n=['fc-list-item'].concat(this.getSegCustomClasses(e)),r=this.getSegBackgroundColor(e),i=e.event,o=i.url,a;return a=i.allDay?t.getAllDayHtml():t.isMultiDayEvent(i)?e.isStart||e.isEnd?Q(this.getEventTimeText(e)):t.getAllDayHtml():Q(this.getEventTimeText(i)),o&&n.push('fc-has-url'),'<tr class="'+n.join(' ')+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+t.widgetContentClass+'">'+(a||'')+'</td>':'')+'<td class="fc-list-item-marker '+t.widgetContentClass+'"><span class="fc-event-dot"'+(r?' style="background-color:'+r+'"':'')+'></span></td><td class="fc-list-item-title '+t.widgetContentClass+'"><a'+(o?' href="'+Q(o)+'"':'')+'>'+Q(e.event.title||'')+'</a></td></tr>'}});return Ze.list={class:Ot,buttonTextKey:'list',defaults:{buttonText:'list',listDayFormat:'LL',noEventsMessage:'No events to display'}},Ze.listDay={type:'list',duration:{days:1},defaults:{listDayFormat:'dddd'}},Ze.listWeek={type:'list',duration:{weeks:1},defaults:{listDayFormat:'dddd',listDayAltFormat:'LL'}},Ze.listMonth={type:'list',duration:{month:1},defaults:{listDayAltFormat:'dddd'}},Ze.listYear={type:'list',duration:{year:1},defaults:{listDayAltFormat:'dddd'}},qe});