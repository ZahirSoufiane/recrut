<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-list/iron-list.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/communication-icons.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html">
<link rel="import" href="../../bower_components/paper-swipe/paper-swipe.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<!-- <link rel="import" href="../../bower_components/paper-item/paper-icon-item.html"> -->
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../token-ajax.html">

</head><body><dom-module id="random-swipe-list">
  <template strip-whitespace="">
    <style>:host{display:block;box-sizing:border-box;height:100vh;}*, *:before, *:after{box-sizing:inherit;}iron-list{margin-top:330px;height:100vh;background:url(https://www.yesmarried.com/resources/images/bright_background.jpg) no-repeat center center fixed;@apply (--layout-fit);}.swipe-item{--paper-swipe-content:{background-color:#fff;border-bottom:1px solid #ddd;};--paper-swipe-underlay:{@apply (--layout-horizontal);@apply (--layout-center-center);};@apply (--layout-center-justified);}.swipe-underlay{color:#e0e0e0;}.a{background-color:#1976D2;}.b{background-color:#D32F2F;}.c{background-color:#0097A7;}.d{background-color:#388E3C;}.e{background-color:#FBC02D;}.f{background-color:#C2185B;}.g{background-color:#7B1FA2;}.hidden{display:none;}paper-card{text-align:center;margin-left:auto;margin-right:auto;left:0;right:0;display:block;position:relative;max-width:450px;border:1px solid black;}.swipetext{text-align:center;font-size:21px;color:#aa3e3e;}#addedToast{--paper-toast-background-color:green;--paper-toast-color:white;width:100%;text-align:center;font-weight:bold;}.buttonbar{@apply (--layout-horizontal);@apply (--layout-center-center);padding:5px;}.buttonbar paper-fab{margin-left:5px;margin-right:5px;}.buttonbar paper-fab:hover{background-color:pink;}.buttonbar .notlike{background-color:red;}.buttonbar .like{background-color:#e6e6e6;color:#c14e4e;}.blacktext{color:black;}</style>
    
 <token-ajax id="swipeListReq" url="/providers/random?lang={{language}}" token="{{token}}" last-response="{{swipeList}}"></token-ajax>
 <token-ajax autogo="false" id="addFav" token="{{token}}" on-error="_favoriteError"></token-ajax>
 
    <iron-list id="swipeList" items="[[swipeList]]">
      <template strip-whitespace="">
      	
        <paper-swipe class$="swipe-item [[_visiblityClass(index)]]" peek-offset="0" fade="" on-edge="_onEdge">
<!--           <paper-icon-item content> -->
<!--             <div class$="swipe-avatar[[_randomColor(item.index)]]" item-icon></div> -->
<!--             [[index]], [[item.name]] at [[item.id]] -->
<!--           </paper-icon-item> -->
          <div content="">
          		<div class="swipetext">
			      	<p>{{localize('swipe.youhavenot')}} [[item.category]].</p>
			      	<p>{{localize('swipe.youlike')}} ? </p>
			      	<p class="blacktext">{{localize('swipe.explain')}}</p>
		      	</div>
<!--             <div class$="swipe-avatar[[_randomColor(item.index)]] item-icon"></div> -->
				 
            	 <paper-card image="[[item.image]]" alt="[[item.name]] on Yes Married !">
				    <div class="card-content">
				      <div class="cafe-header">[[item.name]]
				        <div class="cafe-location cafe-light">
				          <iron-icon icon="communication:location-on"></iron-icon>
				          <span>[[item.distanceInKm]] km</span>
				        </div>
				      </div>
				      <div class="cafe-rating">
				        <iron-icon class="star" icon="iconss:star"></iron-icon>
				        <iron-icon class="star" icon="iconss:star"></iron-icon>
				        <iron-icon class="star" icon="iconss:star"></iron-icon>
				        <iron-icon class="star" icon="iconss:star"></iron-icon>
				        <iron-icon class="star" icon="iconss:star"></iron-icon>
				      </div>
				      <p>[[item.name]], [[item.category]]</p>
				      <p class="cafe-light">[[item.description]]</p>
				    </div>
				    <!-- 
				    <div class="card-actions">
				      <p>Tonight's availability</p>
				      <div class="horizontal justified">
				        <paper-icon-button icon="iconss:event"></paper-icon-button>
				        <paper-button>5:30PM</paper-button>
				        <paper-button>7:30PM</paper-button>
				        <paper-button>9:00PM</paper-button>
				      </div>
				      <paper-button class="cafe-reserve">Reserve</paper-button>
				       -->
					 <div class="buttonbar">
						 <paper-fab providerid="[[item.id]]" class="notlike" icon="iconss:block" title="no" on-tap="_doNotLike"></paper-fab>
						 <paper-fab providerid="[[item.id]]" class="like" icon="iconss:favorite" title="like" on-tap="_doLike"></paper-fab>
					 </div>
				    </paper-card></div>
				  
          
          <div underlay="" class$="swipe-underlay[[_randomColor(item.index)]]">
<!--             [[index]], [[item.title]] at [[item.id]] -->
          </div>
        </paper-swipe>
      </template>
    </iron-list>
    
		<paper-toast id="addedToast" text="Ajouté à vos favoris!"></paper-toast>
  </template>
  <script>Polymer({is:'random-swipe-list',attached:function(){this.loadResources(this.resolveUrl('../../data/locales.json?v=1.2'))},behaviors:[Polymer.AppLocalizeBehavior],properties:{token:{type:String,notify:!0},hasChangesDetected:{type:Boolean,notify:!0}},ready:function(){},_favoriteError:function(){},_doLike:function(){var a=this.swipeList[0];this.splice('swipeList',0,1),this._saveFavorite(a.id,a.name)},_doNotLike:function(){this.splice('swipeList',0,1)},_saveFavorite:function(a,b){this.hasChangesDetected=!0,this.$.addFav.url='/admin/favorite/add/'+a,this.$.addFav.go(),this.$.addedToast.text=b+this.localize('swipe.favoriteadded')+' !',this.$.addedToast.show()},_randomColor:function(){var a=Math.floor(8*Math.random()),b=' '+['a','b','c','d','e','f','g',''][a];return b},_visiblityClass:function(a){return 0==a?'':'hidden'},_onEdge:function(a){var b=a.model.item,c=a.target;this.splice('swipeList',a.model.index,1),a.currentTarget._slideLeft||this._saveFavorite(b.id,b.name),this.async(function(){c.resetPosition(),this.$.swipeList.updateSizeForItem(a.model.index)},1)}});</script>
</dom-module>
</body></html>